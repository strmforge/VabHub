# 115ç½‘ç›˜å¯†é’¥æ›´æ–°è¯´æ˜

## ğŸ“‹ æ›´æ–°æ—¥æœŸ
2025-01-XX

## ğŸ”„ æ›´æ–°å†…å®¹

### å¯†é’¥è¦æ±‚å˜æ›´
- **ä¹‹å‰**: éœ€è¦AppIDã€AppKeyå’ŒAppSecretï¼ˆä¸‰ä¸ªå‚æ•°ï¼‰
- **ç°åœ¨**: åªéœ€è¦AppIDå’ŒAppKeyï¼ˆä¸¤ä¸ªå‚æ•°ï¼‰
- **è¯´æ˜**: AppSecretæ˜¯å¯é€‰çš„ï¼Œ115ç½‘ç›˜APIé€šå¸¸ä¸éœ€è¦

### æ›´æ–°åŸå› 
æ ¹æ®115ç½‘ç›˜APIçš„å®é™…éœ€æ±‚ï¼Œåªéœ€è¦AppIDå’ŒAppKeyå³å¯å®Œæˆè®¤è¯å’ŒAPIè°ƒç”¨ã€‚AppSecretåœ¨115ç½‘ç›˜çš„OAuth2æµç¨‹ä¸­ä¸éœ€è¦ã€‚

## âœ… å·²æ›´æ–°çš„æ–‡ä»¶

### 1. Cloud115Provider
- **æ–‡ä»¶**: `backend/app/core/cloud_storage/providers/cloud_115.py`
- **æ›´æ–°**: ç§»é™¤å¯¹AppSecretçš„å¼ºåˆ¶è¦æ±‚
- **å˜æ›´**: åªæ£€æŸ¥AppIDå’ŒAppKeyæ˜¯å¦å­˜åœ¨

### 2. CloudKeyManager
- **æ–‡ä»¶**: `backend/app/core/cloud_key_manager.py`
- **æ›´æ–°**: `set_115_keys`æ–¹æ³•ä¸­AppSecretå˜ä¸ºå¯é€‰å‚æ•°
- **å˜æ›´**: `get_115_keys`æ–¹æ³•ä¸­å¦‚æœAppSecretä¸ºç©ºåˆ™ç§»é™¤

### 3. è®¾ç½®è„šæœ¬
- **æ–‡ä»¶**: `backend/scripts/setup_115_keys.py`
- **æ›´æ–°**: æ›´æ–°ä¸ºåªéœ€è¦AppIDå’ŒAppKey
- **å˜æ›´**: AppSecretè¾“å…¥å˜ä¸ºå¯é€‰

### 4. åˆå§‹åŒ–è„šæœ¬
- **æ–‡ä»¶**: `backend/scripts/init_cloud_storage.py`
- **æ›´æ–°**: æ›´æ–°ä¸ºåªéœ€è¦AppIDå’ŒAppKey
- **å˜æ›´**: é”™è¯¯æç¤ºä¸­è¯´æ˜åªéœ€è¦AppIDå’ŒAppKey

### 5. å­˜å‚¨æœåŠ¡
- **æ–‡ä»¶**: `backend/app/modules/cloud_storage/service.py`
- **æ›´æ–°**: æ›´æ–°ä¸ºåªéœ€è¦AppIDå’ŒAppKey
- **å˜æ›´**: éªŒè¯é€»è¾‘åªæ£€æŸ¥AppIDå’ŒAppKey

## ğŸ“ ä½¿ç”¨æ–¹å¼

### æ–¹å¼1: ç¯å¢ƒå˜é‡è®¾ç½®ï¼ˆæ¨èï¼‰

```bash
# è®¾ç½®ç¯å¢ƒå˜é‡ï¼ˆåªéœ€è¦AppIDå’ŒAppKeyï¼‰
export VABHUB_115_APP_ID="100197729"
export VABHUB_115_APP_KEY="d099625d59aba2a79e70b81fc4589b26"

# è¿è¡Œè®¾ç½®è„šæœ¬
python backend/scripts/setup_115_keys.py --from-env
```

### æ–¹å¼2: äº¤äº’å¼è®¾ç½®

```bash
python backend/scripts/setup_115_keys.py --interactive
```

è„šæœ¬ä¼šæç¤ºè¾“å…¥AppIDå’ŒAppKeyï¼ŒAppSecretæ˜¯å¯é€‰çš„ï¼ˆå¯ä»¥ç›´æ¥å›è½¦è·³è¿‡ï¼‰ã€‚

### æ–¹å¼3: ä½¿ç”¨.envæ–‡ä»¶

åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `.env` æ–‡ä»¶ï¼š
```env
# 115ç½‘ç›˜å¼€å‘è€…å¯†é’¥ï¼ˆåªéœ€è¦AppIDå’ŒAppKeyï¼‰
VABHUB_115_APP_ID=100197729
VABHUB_115_APP_KEY=d099625d59aba2a79e70b81fc4589b26
# AppSecretæ˜¯å¯é€‰çš„ï¼Œé€šå¸¸ä¸éœ€è¦
# VABHUB_115_APP_SECRET=your_app_secret
```

## ğŸ”„ è¿ç§»æŒ‡å—

### å¦‚æœæ‚¨ä¹‹å‰å·²ç»è®¾ç½®äº†å¯†é’¥

1. **ä½¿ç”¨ç°æœ‰å¯†é’¥**: å¦‚æœæ‚¨çš„å¯†é’¥å·²ç»å­˜å‚¨åœ¨åŠ å¯†æ–‡ä»¶ä¸­ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨ä½¿ç”¨ï¼Œæ— éœ€é‡æ–°è®¾ç½®ã€‚

2. **æ›´æ–°å¯†é’¥**: å¦‚æœéœ€è¦åœ¨æ›´æ–°åé‡æ–°è®¾ç½®å¯†é’¥ï¼Œåªéœ€æä¾›AppIDå’ŒAppKeyå³å¯ï¼š
   ```bash
   export VABHUB_115_APP_ID="your_app_id"
   export VABHUB_115_APP_KEY="your_app_key"
   python backend/scripts/setup_115_keys.py --from-env
   ```

3. **ç§»é™¤AppSecret**: å¦‚æœæ‚¨ä¹‹å‰è®¾ç½®äº†AppSecretï¼Œç°åœ¨å¯ä»¥å¿½ç•¥å®ƒã€‚ç³»ç»Ÿä¼šè‡ªåŠ¨å¤„ç†ã€‚

## âœ… éªŒè¯

è®¾ç½®å®Œæˆåï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼éªŒè¯ï¼š

```python
from app.core.cloud_key_manager import get_key_manager

key_manager = get_key_manager()
keys = key_manager.get_115_keys()

if keys:
    print(f"AppID: {keys.get('app_id')}")
    print(f"AppKey: {keys.get('app_key')}")
    # AppSecretå¯èƒ½ä¸å­˜åœ¨ï¼Œè¿™æ˜¯æ­£å¸¸çš„
    if keys.get('app_secret'):
        print(f"AppSecret: {keys.get('app_secret')} (å¯é€‰)")
else:
    print("æœªæ‰¾åˆ°115ç½‘ç›˜å¯†é’¥")
```

## ğŸ“š ç›¸å…³æ–‡æ¡£

- `115ç½‘ç›˜å¯†é’¥å®‰å…¨ä½¿ç”¨æŒ‡å—.md` - å®Œæ•´çš„ä½¿ç”¨æŒ‡å—
- `115ç½‘ç›˜å¯†é’¥å®‰å…¨æ£€æŸ¥æŠ¥å‘Š.md` - å®‰å…¨æ£€æŸ¥æŠ¥å‘Š

## ğŸ¯ æ€»ç»“

- âœ… **å·²æ›´æ–°**: æ‰€æœ‰ç›¸å…³ä»£ç å·²æ›´æ–°ä¸ºåªéœ€è¦AppIDå’ŒAppKey
- âœ… **å‘åå…¼å®¹**: å¦‚æœä¹‹å‰è®¾ç½®äº†AppSecretï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å¤„ç†
- âœ… **æ›´ç®€å•**: ç°åœ¨åªéœ€è¦è®¾ç½®ä¸¤ä¸ªå‚æ•°ï¼Œè€Œä¸æ˜¯ä¸‰ä¸ª
- âœ… **æ›´å®‰å…¨**: å‡å°‘äº†éœ€è¦ç®¡ç†çš„æ•æ„Ÿä¿¡æ¯æ•°é‡

---

**çŠ¶æ€**: âœ… å®Œæˆ  
**æœ€åæ›´æ–°**: 2025-01-XX

