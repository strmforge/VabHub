# ç¬¬ä¸€æ­¥ï¼šè®¤è¯ç³»ç»Ÿå®ç°

## ğŸ¯ ç›®æ ‡

å®ç°å®Œæ•´çš„ç”¨æˆ·è®¤è¯ç³»ç»Ÿï¼Œè®©ç”¨æˆ·å¯ä»¥æ³¨å†Œã€ç™»å½•ï¼Œå¹¶ä¿æŠ¤APIã€‚

## âœ… æ£€æŸ¥æ¸…å•

### 1. ä¾èµ–æ£€æŸ¥
ç¡®ä¿ `requirements.txt` åŒ…å«ä»¥ä¸‹ä¾èµ–ï¼š
- `fastapi`
- `uvicorn[standard]`
- `sqlalchemy`
- `aiosqlite` (SQLite) æˆ– `asyncpg` (PostgreSQL)
- `python-jose[cryptography]`
- `passlib[bcrypt]`
- `python-multipart`
- `pydantic`
- `pydantic-settings`

### 2. ä»£ç æ£€æŸ¥
- âœ… `backend/app/models/user.py` - ç”¨æˆ·æ¨¡å‹å·²åˆ›å»º
- âœ… `backend/app/core/security.py` - å®‰å…¨åŠŸèƒ½å·²åˆ›å»º
- âœ… `backend/app/core/config.py` - é…ç½®å·²åŒ…å«JWTè®¾ç½®
- âœ… `backend/app/api/auth.py` - è®¤è¯APIå·²åˆ›å»º
- âœ… `backend/app/core/database.py` - æ•°æ®åº“è¿æ¥å·²é…ç½®

### 3. éœ€è¦å®Œå–„çš„éƒ¨åˆ†

#### 3.1 æ£€æŸ¥Useræ¨¡å‹æ–¹æ³•
ç¡®ä¿Useræ¨¡å‹æœ‰è¿™äº›æ–¹æ³•ï¼š
- `get_by_username()` âœ… å·²æœ‰
- `get_by_email()` âœ… å·²æœ‰
- `save()` âœ… å·²æœ‰

#### 3.2 æ£€æŸ¥security.pyå‡½æ•°
ç¡®ä¿æœ‰è¿™äº›å‡½æ•°ï¼š
- `verify_password()` âœ… å·²æœ‰
- `get_password_hash()` âœ… å·²æœ‰
- `create_access_token()` âœ… å·²æœ‰
- `decode_access_token()` âœ… å·²æœ‰

#### 3.3 æ£€æŸ¥config.pyé…ç½®
ç¡®ä¿æœ‰è¿™äº›é…ç½®ï¼š
- `JWT_SECRET_KEY` âœ… å·²æœ‰
- `JWT_ALGORITHM` âœ… å·²æœ‰
- `JWT_EXPIRATION_HOURS` âœ… å·²æœ‰

## ğŸš€ å®æ–½æ­¥éª¤

### æ­¥éª¤1ï¼šå®‰è£…ä¾èµ–

```bash
cd VabHub
pip install -r requirements.txt
```

### æ­¥éª¤2ï¼šæµ‹è¯•æ•°æ®åº“åˆå§‹åŒ–

```bash
cd backend
python -c "from app.core.database import init_db; import asyncio; asyncio.run(init_db())"
```

åº”è¯¥ä¼šåˆ›å»º `vabhub.db` æ–‡ä»¶ï¼ˆå¦‚æœä½¿ç”¨SQLiteï¼‰ã€‚

### æ­¥éª¤3ï¼šå¯åŠ¨åç«¯æœåŠ¡

```bash
cd backend
python main.py
```

æˆ–è€…ï¼š

```bash
uvicorn main:app --reload --host 0.0.0.0 --port 8000
```

è®¿é—® http://localhost:8000/docs æŸ¥çœ‹APIæ–‡æ¡£ã€‚

### æ­¥éª¤4ï¼šæµ‹è¯•è®¤è¯API

#### 4.1 æ³¨å†Œç”¨æˆ·
```bash
curl -X POST "http://localhost:8000/api/v1/auth/register" \
  -H "Content-Type: application/json" \
  -d '{
    "username": "testuser",
    "email": "test@example.com",
    "password": "test123456",
    "full_name": "Test User"
  }'
```

#### 4.2 ç™»å½•
```bash
curl -X POST "http://localhost:8000/api/v1/auth/login" \
  -H "Content-Type: application/x-www-form-urlencoded" \
  -d "username=testuser&password=test123456"
```

åº”è¯¥è¿”å›ï¼š
```json
{
  "access_token": "eyJ...",
  "token_type": "bearer"
}
```

#### 4.3 è·å–ç”¨æˆ·ä¿¡æ¯
```bash
curl -X GET "http://localhost:8000/api/v1/auth/me" \
  -H "Authorization: Bearer YOUR_TOKEN_HERE"
```

### æ­¥éª¤5ï¼šå‰ç«¯è”è°ƒ

#### 5.1 å¯åŠ¨å‰ç«¯
```bash
cd frontend
npm install
npm run dev
```

#### 5.2 æµ‹è¯•ç™»å½•é¡µé¢
è®¿é—® http://localhost:5173/login

å°è¯•ç™»å½•ï¼Œæ£€æŸ¥ï¼š
- æ˜¯å¦èƒ½å‘é€è¯·æ±‚
- æ˜¯å¦èƒ½è·å–token
- æ˜¯å¦èƒ½ä¿å­˜token
- æ˜¯å¦èƒ½è·³è½¬åˆ°ä»ªè¡¨ç›˜

## ğŸ› å¸¸è§é—®é¢˜

### é—®é¢˜1ï¼šæ•°æ®åº“åˆå§‹åŒ–å¤±è´¥
**é”™è¯¯**: `ModuleNotFoundError: No module named 'aiosqlite'`

**è§£å†³**:
```bash
pip install aiosqlite
```

### é—®é¢˜2ï¼šJWTé”™è¯¯
**é”™è¯¯**: `JWTError: Invalid token`

**è§£å†³**: æ£€æŸ¥ `JWT_SECRET_KEY` æ˜¯å¦è®¾ç½®æ­£ç¡®ã€‚

### é—®é¢˜3ï¼šå¯†ç éªŒè¯å¤±è´¥
**é”™è¯¯**: `Invalid password`

**è§£å†³**: æ£€æŸ¥ `passlib` å’Œ `bcrypt` æ˜¯å¦æ­£ç¡®å®‰è£…ã€‚

### é—®é¢˜4ï¼šCORSé”™è¯¯
**é”™è¯¯**: `CORS policy: No 'Access-Control-Allow-Origin'`

**è§£å†³**: æ£€æŸ¥ `config.py` ä¸­çš„ `CORS_ORIGINS` æ˜¯å¦åŒ…å«å‰ç«¯åœ°å€ã€‚

## âœ… éªŒæ”¶æ ‡å‡†

å®Œæˆä»¥ä¸‹æµ‹è¯•ï¼š

- [ ] å¯ä»¥æ³¨å†Œæ–°ç”¨æˆ·
- [ ] æ³¨å†Œæ—¶æ£€æŸ¥ç”¨æˆ·åå’Œé‚®ç®±å”¯ä¸€æ€§
- [ ] å¯ä»¥ç™»å½•è·å–token
- [ ] tokenå¯ä»¥è®¿é—® `/api/v1/auth/me`
- [ ] æ— æ•ˆtokenä¼šè¢«æ‹’ç»
- [ ] å‰ç«¯å¯ä»¥æ­£å¸¸ç™»å½•
- [ ] ç™»å½•åå¯ä»¥è®¿é—®å—ä¿æŠ¤é¡µé¢

## ğŸ“ ä¸‹ä¸€æ­¥

è®¤è¯ç³»ç»Ÿå®Œæˆåï¼Œå¯ä»¥ï¼š

1. **ä»ªè¡¨ç›˜API** - å®ç°ç³»ç»Ÿç›‘æ§å’Œç»Ÿè®¡API
2. **æœç´¢ç³»ç»Ÿ** - å®ç°åŸºç¡€æœç´¢åŠŸèƒ½
3. **è®¢é˜…ç®¡ç†** - å®ç°è®¢é˜…CRUD

---

**å‡†å¤‡å¥½äº†å—ï¼Ÿè®©æˆ‘ä»¬å¼€å§‹å®ç°ï¼** ğŸš€

