# Manga Source Phase 2 - 外部漫画源集成

## 概述

Manga Source Phase 2 让 VabHub 成为 Komga / Suwayomi / OPDS 等外部漫画服务的**统一搜索入口 + 浏览入口 + 追更入口**，实现真正的第三方源接入。

### 核心功能

- 🔍 **聚合搜索**：一次搜索，查询所有配置的漫画源
- ⭐ **远程追更**：不下载章节，直接追更外部漫画
- 🔗 **原站打开**：一键跳转到原漫画源阅读
- 📱 **通知集成**：通过 VabHub 通知体系接收更新提醒
- 📚 **统一管理**：在书架中统一管理本地和外部源追更

### 支持的漫画源

| 源类型 | 状态 | 说明 |
|--------|------|------|
| Komga | ✅ 完全支持 | 自托管漫画服务器 |
| Suwayomi | ✅ 完全支持 | Tachiyomi 扩展服务 |
| OPDS | ✅ 完全支持 | 标准漫画分发协议 |
| Generic HTTP | ✅ 完全支持 | 通用 HTTP API |

### 快速开始

1. **配置漫画源**：参考 [配置指南](./CONFIGURATION.md)
2. **搜索漫画**：访问漫画中心的"从外部源导入"
3. **追更漫画**：点击"追这部"按钮（无需下载）
4. **接收通知**：开启 Telegram 或 Web 通知
5. **原站阅读**：点击通知中的"在原站打开"

## 文档导航

- [📋 配置指南](./CONFIGURATION.md) - 漫画源配置详解
- [📖 用户指南](./USER_GUIDE.md) - 详细使用教程
- [🔧 API 参考](./API_REFERENCE.md) - API 端点说明
- [🚀 部署指南](./DEPLOYMENT.md) - 部署和迁移
- [🔧 故障排除](./TROUBLESHOOTING.md) - 常见问题解决

## 架构概览

```
用户搜索 → 聚合搜索API → 并发调用多源适配器 → 合并结果 → 展示
     ↓
点击"追这部" → 创建MangaSeriesLocal记录(不下载) → 创建UserMangaFollow → 追更Runner监控
     ↓
章节更新 → 追更Runner检测 → 发送MANGA_UPDATED通知 → TG/Web端展示
```

## 数据流说明

1. **搜索阶段**：VabHub 并发调用所有启用的漫画源 API，合并搜索结果
2. **追更阶段**：创建本地记录但不下载章节，仅保存外部源引用
3. **同步阶段**：定期检查外部源更新，发送通知但不下载内容
4. **阅读阶段**：用户点击"在原站打开"跳转到外部源阅读

## 版本信息

- **Phase 2.0**：核心功能实现（聚合搜索、远程追更、通知集成）
- **Phase 2.1**：性能优化和用户体验改进
- **Phase 3.0**：计划支持章节下载到本地（未来版本）

## 技术要求

- **后端**：Python 3.9+, FastAPI, SQLAlchemy
- **前端**：Vue 3, TypeScript, Vuetify
- **数据库**：SQLite / PostgreSQL
- **外部源**：支持 HTTP/HTTPS API 的漫画服务

## 贡献指南

欢迎提交 Issue 和 Pull Request 来改进 Manga Source 功能：

1. 功能建议：请提交 Issue 描述需求
2. Bug 报告：请提供详细的错误日志
3. 适配器开发：参考现有适配器实现新的漫画源支持

## 许可证

本功能遵循 VabHub 项目的开源许可证。
