# AI 中心 UI 总览

> **用途**：解释"左侧 🤖 AI 中心 下面的每个页面是干什么的"，以及页面与 Orchestrator 模式、只读工具、业务线文档的映射关系。  
> **阅读对象**：你本人、新窗口 AI/IDE、想扩展新 AI 页面的贡献者。

---

## 0. 使用说明

### 0.1 本文定位

本文回答以下问题：
- AI 中心有哪些页面？每个页面干什么？
- 每个页面对应哪个 Orchestrator 模式？
- 每个页面会调用哪些只读工具？
- 想改某个 AI 页面，应该先看哪份文档？

### 0.2 与其他文档的关系

| 文档 | 关注点 |
|------|--------|
| `FUTURE_AI_OVERVIEW.md` | 架构层：Orchestrator 服务、LLM 客户端、工具注册、模式定义 |
| **本文** | UI 层：页面功能、交互规范、使用路径 |
| `CONFIG_OVERVIEW.md` | 配置层：AI_ORCH_* 环境变量、LLM 连接配置 |

### 0.3 给未来 AI 的提示

当用户问到以下问题时，请先读本文件：
- "AI 订阅助手怎么用？"
- "AI 故障医生能做什么？"
- "这些 AI 页面是只读的吗？"
- "想新增一个 AI 页面要怎么做？"

---

## 1. 模块一览（按左侧导航）

### 🤖 AI 中心

| 页面 | 路由 | 模式 | 一句话简介 |
|------|------|------|------------|
| **AI 实验室** | `/ai-lab` | GENERIC | 高级用户的"组合拳"实验台 |
| **AI 订阅助手** | `/ai-subs-assistant` | SUBS_ADVISOR | 用自然语言生成订阅规则草案 |
| **AI 故障医生** | `/ai-log-doctor` | DIAGNOSE | 系统健康诊断，定位问题原因 |
| **AI 整理顾问** | `/ai-cleanup-advisor` | CLEANUP_ADVISOR | 存储/媒体库清理建议 |
| **AI 阅读助手** | `/ai-reading-assistant` | READING_ASSISTANT | 阅读计划与书单建议 |

### 典型问题举例

| 页面 | 你可能会问的问题 |
|------|------------------|
| **AI 订阅助手** | "帮我为最近热播韩剧做一套订阅工作流" |
| **AI 故障医生** | "昨天晚上下载任务都不动了，看看哪里有问题？" |
| **AI 整理顾问** | "磁盘快满了，告诉我可以安全删点什么" |
| **AI 阅读助手** | "帮我排个下周阅读计划，优先我已经读到一半的书" |
| **AI 实验室** | "综合分析一下我的站点和订阅情况" |

---

## 2. Orchestrator 模式 ↔ 页面映射

| Orchestrator 模式 | 说明 | 绑定页面 | 关联业务线文档 |
|-------------------|------|----------|----------------|
| **GENERIC** | 通用分析模式，可组合多工具 | AI 实验室 | `FUTURE_AI_OVERVIEW.md` |
| **SUBS_ADVISOR** | 生成订阅草案 / 工作流草案 | AI 订阅助手 | `SUBS_RULES_OVERVIEW.md` |
| **DIAGNOSE** | 系统诊断报告 | AI 故障医生 | `SYSTEM_SELF_CHECK_GUIDE.md` |
| **CLEANUP_ADVISOR** | 存储 / 媒体库清理建议 | AI 整理顾问 | `SITE_INTEL_OVERVIEW.md` |
| **READING_ASSISTANT** | 阅读计划 / 书单建议 | AI 阅读助手 | `READING_STACK_OVERVIEW.md` |

### 关键说明

- 所有模式的调用都通过 `AIOrchestratorService`
- **所有模式目前都是只读**：
  - 唯一会"落盘"的路径是：订阅助手在"应用草案"时创建订阅
  - 但创建的订阅带有安全默认值：`paused=true` / `auto_download=false` / `hr_safe=true`

---

## 3. 页面级交互模型（统一规范）

### 3.1 统一头部区域

```
┌─────────────────────────────────────────────────────────┐
│ 🤖 [页面标题] (Beta)                    [模式 Badge]    │
│ [一句话副标题说明]                      [只读提示 Badge] │
└─────────────────────────────────────────────────────────┘
```

| 元素 | 说明 |
|------|------|
| **主标题** | 例如 "AI 订阅助手" |
| **副标题** | 一句话解释功能，例如 "帮你基于现有规则/源生成订阅草案" |
| **模式 Badge** | 例如 `SUBS_ADVISOR`（可选显示） |
| **只读提示** | 例如 "只读建议 / 需要确认才执行" |

### 3.2 配置状态提示

当 Orchestrator 未启用或 LLM 未配置时，显示统一样式的 `v-alert`：

```
┌─────────────────────────────────────────────────────────┐
│ ⚠️ AI 总控尚未配置 LLM 服务                              │
│ 当前处于演示模式，建议参考《CONFIG_OVERVIEW.md》配置。    │
│                                    [查看配置文档]        │
└─────────────────────────────────────────────────────────┘
```

### 3.3 输入区域

- 自然语言输入框
- 预设场景按钮（快速诊断/清理预设/阅读目标预设）
- 可选的参数选择器（时间范围/聚焦类型等）

### 3.4 结果区域

| 页面 | 结果结构 |
|------|----------|
| **AI 订阅助手** | 草案卡片列表 + 应用按钮 |
| **AI 故障医生** | 诊断条目 + 建议步骤 |
| **AI 整理顾问** | 分风险级别展示清理计划 |
| **AI 阅读助手** | 阅读目标 + 推荐列表 |

---

## 4. 工具链 & 数据来源（页面视角）

### 4.1 AI 订阅助手

| 项目 | 说明 |
|------|------|
| **使用模式** | SUBS_ADVISOR |
| **调用工具** | 站点/订阅概览、推荐预览 |
| **输出结构** | `SubsWorkflowDraft` 草案 |
| **关联文档** | `SUBS_RULES_OVERVIEW.md` |

**特殊说明**：唯一有"应用"动作的页面，但创建的订阅默认 `paused=true`。

### 4.2 AI 故障医生

| 项目 | 说明 |
|------|------|
| **使用模式** | DIAGNOSE |
| **调用工具** | Runner 状态、健康检查、日志快照、站点状态 |
| **输出结构** | `SystemDiagnosisReport` |
| **关联文档** | `SYSTEM_SELF_CHECK_GUIDE.md` |

**说明**：AI 是对自检结果的"总结版"，帮你快速定位问题。

### 4.3 AI 整理顾问

| 项目 | 说明 |
|------|------|
| **使用模式** | CLEANUP_ADVISOR |
| **调用工具** | 存储快照、媒体库快照、HNR 状态 |
| **输出结构** | `CleanupPlanDraft` |
| **关联文档** | `SITE_INTEL_OVERVIEW.md`（HR 安全策略） |

**说明**：会标注风险级别（safe/caution/risky），需用户手动执行。

### 4.4 AI 阅读助手

| 项目 | 说明 |
|------|------|
| **使用模式** | READING_ASSISTANT |
| **调用工具** | 阅读进度快照、书库统计 |
| **输出结构** | `ReadingPlanDraft` |
| **关联文档** | `READING_STACK_OVERVIEW.md` |

**说明**：与 TG-BOT-BOOK 的阅读控制台数据相通。

### 4.5 AI 实验室

| 项目 | 说明 |
|------|------|
| **使用模式** | GENERIC（可切换其他模式） |
| **调用工具** | 所有已注册的只读工具 |
| **输出结构** | 取决于选择的模式 |
| **关联文档** | `FUTURE_AI_OVERVIEW.md` |

**说明**：高级用户"玩组合拳"的实验台，输出不会自动执行任何操作。

---

## 5. 安全边界（UI 层强调）

### 5.1 只读原则

| 规则 | 说明 |
|------|------|
| **默认只读** | 所有 AI 页面输出的是建议/报告 |
| **不自动执行** | 不会自动改配置/删文件/停止 Runner |
| **需用户确认** | 订阅助手的"应用草案"需要用户点击确认 |
| **安全默认值** | 创建的订阅默认 paused + auto_download=false |

### 5.2 通道隔离

| 通道 | 用途 |
|------|------|
| **AI 中心** | 用户交互式 AI 助手（Orchestrator + 外部 LLM） |
| **站点 AI 适配** | 站点页面结构解析专用（CF adapter + Qwen） |

**这两个通道不互通，站点 AI 适配的 LLM 不会被 AI 中心复用。**

### 5.3 外部 LLM 响应边界

即使外接的大模型响应很"敢"（比如建议删除大量文件），VabHub UI 也不会自动执行危险建议。用户始终需要手动确认。

---

## 6. 典型使用路线

### 6.1 新手想搞订阅

```
README / GETTING_STARTED
    │
    ▼
SUBS_RULES_OVERVIEW（了解订阅体系）
    │
    ▼
打开 AI 订阅助手
    │
    ▼
输入 "帮我订阅最近热门韩剧"
    │
    ▼
查看草案 → 修改参数
    │
    ▼
点击"应用草案"（创建暂停状态的订阅）
    │
    ▼
去订阅管理启用
```

### 6.2 发现系统卡顿

```
发现下载任务不动了
    │
    ▼
打开 AI 故障医生
    │
    ▼
选择"最近24小时健康体检"预设
    │
    ▼
看诊断结果（哪个模块有问题）
    │
    ▼
根据 SYSTEM_SELF_CHECK_GUIDE 手动操作
```

### 6.3 磁盘快满了

```
收到磁盘空间告警
    │
    ▼
打开 AI 整理顾问
    │
    ▼
选择"安全清理预设"
    │
    ▼
看建议（safe/caution/risky 分级）
    │
    ▼
去下载管理/媒体库里手动处理
```

### 6.4 阅读栈太乱

```
在读的书太多，想整理一下
    │
    ▼
打开 AI 阅读助手
    │
    ▼
选择"本周阅读计划"
    │
    ▼
看建议（优先完成在读的书）
    │
    ▼
去小说中心/有声书中心/漫画中心按建议继续
```

---

## 7. 相关代码位置

| 模块 | 路径 | 说明 |
|------|------|------|
| AI 实验室 | `frontend/src/pages/AiLab.vue` | 通用实验页面 |
| AI 订阅助手 | `frontend/src/pages/AiSubsAssistant.vue` | 订阅草案生成 |
| AI 故障医生 | `frontend/src/pages/AiLogDoctor.vue` | 系统诊断 |
| AI 整理顾问 | `frontend/src/pages/AiCleanupAdvisor.vue` | 清理建议 |
| AI 阅读助手 | `frontend/src/pages/AiReadingAssistant.vue` | 阅读计划 |
| Orchestrator 服务 | `backend/app/core/ai_orchestrator/` | 模式定义与工具注册 |
| 订阅工作流服务 | `backend/app/services/ai_subs_workflow.py` | SUBS_ADVISOR 后端 |
| 诊断服务 | `backend/app/services/ai_log_doctor.py` | DIAGNOSE 后端 |
| 清理服务 | `backend/app/services/ai_cleanup_advisor.py` | CLEANUP_ADVISOR 后端 |
| 阅读服务 | `backend/app/services/ai_reading_assistant.py` | READING_ASSISTANT 后端 |

---

*最后更新：2025-12-03 AI-CENTER-OVERVIEW-1*
