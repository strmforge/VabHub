# PRE-RELEASE SMOKE SCENARIOS

## 1. 下载→整理→入库→播放链路

### 前提条件
- 已配置 PT 站点
- 已配置下载器（qBittorrent/Transmission）
- 已配置媒体库路径

### 关键步骤
1. **搜索资源**：在搜索页面搜索一部电影或电视剧
2. **添加下载**：从搜索结果中选择一个资源，添加到下载队列
3. **监控下载**：在下载管理页面查看下载进度，等待下载完成
4. **触发整理**：下载完成后，系统自动触发整理流程
5. **检查入库**：在媒体库或电视墙页面查看是否成功入库
6. **播放测试**：点击媒体详情页的播放按钮，验证是否能正常播放

### 成功标志
- 下载任务状态显示为"已完成"
- 整理流程成功执行，无错误
- 媒体在电视墙或媒体库中可见
- 媒体可以正常播放

### 常见失败点
- 下载器连接失败
- 媒体识别失败
- 整理路径配置错误
- 播放源选择错误

## 2. TXT→EBook→TTS→有声书链路

### 前提条件
- 已配置 TTS 服务
- 已配置 EBook 转换服务
- 已有 TXT 格式小说文件

### 关键步骤
1. **导入 TXT**：将 TXT 小说文件导入到系统
2. **转换 EBook**：将 TXT 转换为 EBook 格式
3. **生成 TTS**：对 EBook 执行 TTS 转换，生成有声书
4. **查看有声书**：在有声书中心查看生成的有声书
5. **播放有声书**：点击有声书，验证是否能正常播放

### 成功标志
- TXT 文件成功导入
- EBook 转换成功
- TTS 转换成功，生成有声书
- 有声书在有声书中心可见
- 有声书可以正常播放

### 常见失败点
- TXT 文件格式不支持
- EBook 转换服务配置错误
- TTS 服务配置错误
- 音频文件生成失败

## 3. 漫画追更链路

### 前提条件
- 已配置漫画源（Komga/Kavita/OPDS/Suwayomi）
- 已配置追更 Runner

### 关键步骤
1. **配置漫画源**：在漫画中心配置第三方漫画源
2. **添加追更**：选择一部漫画，添加到追更列表
3. **运行追更**：手动触发追更 Runner 或等待定时运行
4. **查看更新**：检查是否成功拉取新章节
5. **查看通知**：检查通知中心是否收到漫画更新通知

### 成功标志
- 漫画源配置成功
- 追更添加成功
- 追更 Runner 正常运行
- 成功拉取新章节
- 通知中心收到漫画更新通知

### 常见失败点
- 漫画源配置错误
- 追更 Runner 配置错误
- 网络连接问题
- 漫画源 API 变更

## 4. 音乐自动循环订阅

### 前提条件
- 已配置音乐订阅规则
- 已配置 MUSIC-AUTOLOOP

### 关键步骤
1. **配置订阅**：在音乐订阅页面配置音乐订阅规则
2. **运行 AUTOLOOP**：手动触发 MUSIC-AUTOLOOP 或等待定时运行
3. **查看下载**：检查是否成功下载音乐
4. **查看媒体库**：在音乐库中查看下载的音乐

### 成功标志
- 音乐订阅规则配置成功
- MUSIC-AUTOLOOP 正常运行
- 成功下载音乐
- 音乐在音乐库中可见

### 常见失败点
- 订阅规则配置错误
- MUSIC-AUTOLOOP 配置错误
- 下载器连接失败
- 音乐文件识别失败

## 5. AI 中心只读助手

### 前提条件
- 已配置 AI Orchestrator
- （可选）已配置外部 LLM

### 关键步骤
1. **AI 实验室**：访问 AI 实验室页面，验证页面能正常加载
2. **AI 订阅助手**：在 AI 订阅助手页面生成订阅草案
3. **AI 故障医生**：在 AI 故障医生页面执行系统诊断
4. **AI 整理顾问**：在 AI 整理顾问页面查看清理建议
5. **AI 阅读助手**：在 AI 阅读助手页面生成阅读计划

### 成功标志
- 所有 AI 页面能正常加载
- AI 订阅助手能生成合理的订阅草案
- AI 故障医生能生成诊断报告
- AI 整理顾问能生成清理建议
- AI 阅读助手能生成阅读计划

### 常见失败点
- AI Orchestrator 配置错误
- 外部 LLM 连接失败
- 工具调用失败
- 响应格式错误

## 6. 通知 & Telegram

### 前提条件
- 已配置通知中心
- 已配置 Telegram Bot

### 关键步骤
1. **触发通知**：执行一个会产生通知的操作（如下载完成）
2. **查看通知中心**：在通知中心查看是否收到通知
3. **查看 Telegram**：在 Telegram Bot 查看是否收到通知
4. **测试 Telegram 命令**：发送一个命令给 Telegram Bot，验证是否能正常响应

### 成功标志
- 通知中心收到通知
- Telegram Bot 收到通知
- Telegram Bot 能正常响应命令

### 常见失败点
- Telegram Bot Token 配置错误
- 代理配置错误
- 通知服务配置错误
- Bot 权限配置错误

## 7. Docker 首次访问

### 前提条件
- 已安装 Docker 和 Docker Compose
- 已克隆 VabHub 仓库
- 已配置 .env.docker 文件

### 关键步骤
1. **启动服务**：执行 `docker compose up -d --build`
2. **检查服务状态**：执行 `docker compose ps`，确保所有服务 Running/Healthy
3. **访问 Web UI**：在浏览器访问 http://localhost:8092
4. **验证页面加载**：
   - 能看到登录页或首页
   - 页面无白屏、JS 报错
   - 首屏 API 请求没有明显 500 错误
5. **访问 API 文档**：在浏览器访问 http://localhost:8092/docs

### 成功标志
- 所有 Docker 容器成功启动
- 能正常访问 Web UI
- API 文档能正常加载
- 无明显报错

### 常见失败点
- Docker Desktop 未运行
- 端口被占用
- 环境变量配置错误
- 数据库初始化失败
- 权限问题

### 结果标记
✅ 预期能成功启动（受环境限制，Docker Desktop 未运行，无法实际验证）
