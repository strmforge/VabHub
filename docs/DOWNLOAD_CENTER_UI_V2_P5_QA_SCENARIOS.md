# DOWNLOAD-CENTER-UI-2 P5 QA 验收场景

## 核心场景测试

### 1. 正常流程测试
**场景**: 订阅 → 下载 → 自动整理成功 → 任务退场

**测试步骤**:
1. 创建一个新的订阅任务（带有VabHub标签）
2. 等待任务开始下载
3. 等待下载完成并自动整理
4. 验证任务从工作视图消失

**预期结果**:
- ✅ 任务在下载过程中正常显示在对应Tab
- ✅ 下载完成后显示"自动整理成功"状态
- ✅ 整理完成后任务自动从所有Tab消失
- ✅ 任务可在"最近完成"Tab中查看（24小时内）

### 2. 失败处理测试
**场景**: 自动整理失败 → 显示手动整理按钮 → 手动整理成功 → 任务退场

**测试步骤**:
1. 模拟自动整理失败的任务
2. 验证手动整理按钮显示
3. 点击手动整理按钮
4. 完成手动整理流程
5. 验证任务退场

**预期结果**:
- ✅ 失败任务显示"自动整理失败"状态
- ✅ 显示"手动整理"按钮
- ✅ 手动整理对话框正确打开
- ✅ 整理完成后任务状态更新为"手动整理完成"
- ✅ 任务从工作视图消失

### 3. 刷流隔离测试
**场景**: 无标签任务 → 不出现在下载中心

**测试步骤**:
1. 在下载器中创建无VabHub标签的任务
2. 刷新下载中心页面
3. 验证任务不显示

**预期结果**:
- ✅ 无标签任务不显示在任何Tab
- ✅ 页面顶部提示说明过滤规则
- ✅ 统计数据不包含无标签任务

### 4. 标签管理测试
**场景**: 手动添加标签 → 任务出现在下载中心

**测试步骤**:
1. 为现有任务添加VabHub标签
2. 刷新下载中心页面
3. 验证任务显示

**预期结果**:
- ✅ 带标签任务正常显示
- ✅ VabHub标识正确显示
- ✅ 任务可正常操作

## 边界场景测试

### 5. 标签配置修改测试
**场景**: 管理员修改白名单后的过滤变化

**测试步骤**:
1. 修改后端VABHUB_TORRENT_LABELS配置
2. 重启服务
3. 验证过滤逻辑变化

**预期结果**:
- ✅ 过滤逻辑按新配置生效
- ✅ 符合新标签规则的任务正确显示/隐藏

### 6. 状态回退测试
**场景**: 已整理任务的状态查询和显示

**测试步骤**:
1. 查询已整理完成的任务
2. 验证状态显示
3. 测试历史数据兼容性

**预期结果**:
- ✅ 历史数据正确显示为"NONE"状态
- ✅ 新数据正确显示整理状态
- ✅ API向后兼容性良好

### 7. 并发处理测试
**场景**: 多个任务同时整理的状态更新

**测试步骤**:
1. 同时启动多个下载任务
2. 等待并发整理
3. 验证状态更新正确性

**预期结果**:
- ✅ 并发状态更新不冲突
- ✅ WebSocket实时更新正常
- ✅ 界面响应流畅

## UI/UX 测试

### 8. 过滤说明测试
**场景**: 验证过滤提示信息

**测试步骤**:
1. 访问下载中心页面
2. 查看顶部提示信息
3. 验证信息准确性

**预期结果**:
- ✅ 提示信息清晰准确
- ✅ 用户理解过滤规则
- ✅ 界面友好度良好

### 9. 存储位置显示测试
**场景**: 验证P4新增的存储位置信息

**测试步骤**:
1. 查看有save_path的任务
2. 验证存储位置显示
3. 测试不同路径格式

**预期结果**:
- ✅ 存储路径正确显示
- ✅ 图标和样式美观
- ✅ 长路径正确截断

### 10. 响应式布局测试
**场景**: 不同屏幕尺寸下的显示效果

**测试步骤**:
1. 在桌面端测试
2. 在平板端测试
3. 在移动端测试

**预期结果**:
- ✅ 各设备显示正常
- ✅ 操作按钮可正常点击
- ✅ 信息层次清晰

## 性能测试

### 11. 大量任务测试
**场景**: 1000+任务的加载和操作性能

**测试步骤**:
1. 创建大量测试任务
2. 测试页面加载速度
3. 测试操作响应速度

**预期结果**:
- ✅ 页面加载时间<3秒
- ✅ 操作响应时间<500ms
- ✅ 内存使用合理

### 12. 实时更新测试
**场景**: WebSocket连接和实时更新

**测试步骤**:
1. 测试WebSocket连接稳定性
2. 测试实时状态更新
3. 测试断线重连机制

**预期结果**:
- ✅ 连接稳定可靠
- ✅ 状态更新及时
- ✅ 重连机制正常

## 兼容性测试

### 13. 浏览器兼容性测试
**场景**: 主流浏览器兼容性

**测试步骤**:
1. Chrome浏览器测试
2. Firefox浏览器测试
3. Safari浏览器测试
4. Edge浏览器测试

**预期结果**:
- ✅ 所有浏览器功能正常
- ✅ 样式显示一致
- ✅ 性能表现良好

### 14. API兼容性测试
**场景**: 后端API兼容性

**测试步骤**:
1. 测试新增参数兼容性
2. 测试默认值处理
3. 测试错误处理

**预期结果**:
- ✅ 新参数向后兼容
- ✅ 默认值合理
- ✅ 错误处理完善

## 安全测试

### 15. 权限控制测试
**场景**: 用户权限验证

**测试步骤**:
1. 测试未授权访问
2. 测试越权操作
3. 测试数据泄露

**预期结果**:
- ✅ 权限控制有效
- ✅ 无越权操作
- ✅ 数据安全保护

---

## 测试通过标准

**功能完整性**: 所有核心功能正常工作
**性能指标**: 满足性能要求
**兼容性**: 支持主流浏览器和API版本
**用户体验**: 界面友好，操作流畅
**安全性**: 权限控制有效，数据安全

## 测试报告模板

```
测试日期: [日期]
测试环境: [环境信息]
测试结果: [通过/失败]
问题列表: [发现的问题]
修复状态: [问题修复情况]
```

---

**文档版本**: v1.0  
**创建时间**: 2025-11-28  
**测试负责人**: [测试人员]
