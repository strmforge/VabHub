# VabHub Telegram åŠŸèƒ½è¯´æ˜ï¼ˆv1.0ï¼‰

> ç‰ˆæœ¬ï¼šv1.0 â€“ 2025-11  
> æœ¬æ–‡æè¿° VabHub åœ¨ **Telegram Bot v1** é˜¶æ®µå·²å®ç°çš„å…¨éƒ¨èƒ½åŠ›èŒƒå›´ï¼Œä»¥åŠæ˜ç¡®ä¸åœ¨ v1 èŒƒå›´å†…çš„åŠŸèƒ½ï¼ˆNon-goalsï¼‰ï¼Œæ–¹ä¾¿åç»­è§„åˆ’ v2+ æ—¶å‚è€ƒã€‚

---

## 1. è®¾è®¡ç›®æ ‡

- ä¸ºé‡åº¦ NAS / åª’ä½“ç”¨æˆ·æä¾›ä¸€ä¸ª **éšèº«å¯ç”¨çš„æ§åˆ¶å…¥å£**ã€‚
- é‡ç‚¹æ»¡è¶³ä¸‰ä¸ªåœºæ™¯ï¼š
  - âœ… **è¿œç¨‹æŸ¥çœ‹è¿›åº¦**ï¼šé˜…è¯»ã€ä¸‹è½½ã€éŸ³ä¹è®¢é˜…ç­‰å…³é”®çŠ¶æ€ã€‚
  - âœ… **è½»é‡æ§åˆ¶æ“ä½œ**ï¼šå°‘é‡é«˜ä»·å€¼çš„ä¿®æ”¹ï¼ˆæ ‡è®°å®Œæˆã€æ”¶è—ã€è®¢é˜…è¯•è¿è¡Œç­‰ï¼‰ã€‚
  - âœ… **å…³é”®é£é™©æé†’**ï¼šå°¤å…¶æ˜¯ PT ç«™çš„ HR/H&R é£é™©é¢„è­¦ã€‚
- æ˜ç¡®ä¸è¿½æ±‚ï¼š
  - âŒ æŠŠæ•´ä¸ª Web é¢æ¿æ¬åˆ° TG ä¸Šã€‚
  - âŒ åšæˆå¤æ‚å¤šæ­¥è¡¨å• / æµç¨‹ç¼–æ’å·¥å…·ã€‚

---

## 2. æ•´ä½“æ¶æ„æ¦‚è§ˆ

- Bot åº”ç”¨ï¼š`backend/app/modules/bots/â€¦` 
- ä¸Šä¸‹æ–‡ & é‰´æƒï¼š
  - `TelegramContext`ï¼ˆç»‘å®š VabHub ç”¨æˆ·ï¼Œåšæƒé™æ§åˆ¶ï¼‰
  - æ‰€æœ‰å‘½ä»¤åœ¨æ‰§è¡Œå‰éƒ½ä¼šæ£€æŸ¥ç”¨æˆ·ç»‘å®šçŠ¶æ€
- ç¼“å­˜å±‚ï¼š
  - `ReadingListCache` / `ReadingActivityCache` / `ReadingShelfCache` 
  - ç»Ÿä¸€ TTLï¼ˆ10 åˆ†é’Ÿï¼‰ï¼ŒæŒ‰ user_id éš”ç¦»
- æœåŠ¡å±‚ï¼š
  - `ReadingHubService` / `ReadingControlService` 
  - éŸ³ä¹è®¢é˜…ç›¸å…³æœåŠ¡ï¼ˆåŸºäº MUSIC-AUTOLOOP-2ï¼‰
  - ä¸‹è½½æœç´¢ / è®¢é˜…æœåŠ¡
- é€šçŸ¥é›†æˆï¼š
  - æ ¸å¿ƒåœ¨ Notification ç³»ç»Ÿï¼ŒTG ä½œä¸ºå…¶ä¸­ä¸€ä¸ªæ¸ é“
  - HR é£é™©é€šçŸ¥é»˜è®¤å¼€å¯ TG æ¨é€ï¼Œå…¶ä½™ä¸‹è½½é€šçŸ¥å¯é…ç½®

---

## 3. é˜…è¯»ä¸­å¿ƒï¼ˆå°è¯´ / æœ‰å£°ä¹¦ / æ¼«ç”»ï¼‰

> å…³é”®è¯ï¼š**ä¸‰è§†è§’ + å†™æ“ä½œ**ï¼Œæ‰€æœ‰å‘½ä»¤éƒ½ä»¥ç»Ÿä¸€ç´¢å¼•è®¿é—®ï¼Œè¾“å‡ºç»Ÿä¸€æ–‡æ¡ˆé£æ ¼ã€‚

### 3.1 è¿›è¡Œä¸­è§†è§’ï¼ˆReading â€“ Ongoingï¼‰

- å‘½ä»¤ï¼š
  - `/reading`ï¼šæ··åˆè¿›è¡Œä¸­åˆ—è¡¨ï¼ˆæœ€å¤š 10 æ¡ï¼‰
  - `/reading_books`ï¼šä»…å°è¯´
  - `/reading_audio`ï¼šä»…æœ‰å£°ä¹¦
  - `/reading_manga`ï¼šä»…æ¼«ç”»
- æ˜ç»† & è·³è½¬ï¼š
  - `/reading_detail <index>`ï¼šå½“å‰åˆ—è¡¨é¡¹çš„è¯¦ç»†ä¿¡æ¯
  - `/reading_open <index>`ï¼šæ‰“å¼€ Web é˜…è¯»/æ’­æ”¾é¡µé¢
- ç‰¹æ€§ï¼š
  - åŸºäº `ReadingListCache`ï¼Œ10 åˆ†é’Ÿ TTL
  - è¾“å‡ºç»Ÿä¸€å¸¦"ï¼ˆåªè¯»æ¨¡å¼ï¼‰"æ ‡è¯†

### 3.2 æœ€è¿‘æ´»åŠ¨è§†è§’ï¼ˆReading â€“ Timelineï¼‰

- å‘½ä»¤ï¼š
  - `/reading_recent`ï¼šæœ€è¿‘ 50 æ¡é˜…è¯»/å¬ä¹¦/çœ‹æ¼«ç”»æ´»åŠ¨
  - `/reading_recent_open <index>`ï¼šæ‰“å¼€å¯¹åº”æ´»åŠ¨çš„ Web é¡µé¢
- ç‰¹æ€§ï¼š
  - åŸºäº `ReadingActivityCache`ï¼Œ10 åˆ†é’Ÿ TTL
  - æ”¯æŒ"x åˆ†é’Ÿå‰ / x å°æ—¶å‰"çš„ç›¸å¯¹æ—¶é—´æ˜¾ç¤º

### 3.3 ä¹¦æ¶è§†è§’ï¼ˆShelf â€“ æ”¶è—ï¼‰

- å‘½ä»¤ï¼š
  - `/shelf`ï¼šæ··åˆä¹¦æ¶åˆ—è¡¨
  - `/shelf_books`ï¼šå°è¯´ä¹¦æ¶
  - `/shelf_audio`ï¼šæœ‰å£°ä¹¦ä¹¦æ¶
  - `/shelf_manga`ï¼šæ¼«ç”»ä¹¦æ¶
- æ˜ç»† & è·³è½¬ï¼š
  - `/shelf_detail <index>` 
  - `/shelf_open <index>` 
- ç‰¹æ€§ï¼š
  - `ReadingShelfCache`ï¼ˆæŒ‰ç±»å‹åˆ†æ¡¶ + 10 åˆ†é’Ÿ TTLï¼‰
  - é˜…è¯»ä¸­å¿ƒèœå•å†…ç½® "ğŸ“š æˆ‘çš„ä¹¦æ¶" æŒ‰é’®è§¦å‘

### 3.4 å†™æ“ä½œè§†è§’ï¼ˆReading Controlï¼‰

- å‘½ä»¤ï¼š
  - `/reading_done <index>`ï¼šæ ‡è®°è¯¥æ¡ç›®"å·²å®Œæˆ"
  - `/reading_fav <index>`ï¼šåŠ å…¥ä¹¦æ¶æ”¶è—
  - `/shelf_unfav <index>`ï¼šä»ä¹¦æ¶ä¸­ç§»é™¤æ”¶è—
- æœåŠ¡å±‚ï¼š
  - `ReadingControlService` ç»Ÿä¸€å†™å…¥å£
- ç‰¹æ€§ï¼š
  - å¹‚ç­‰ï¼šé‡å¤æ‰§è¡Œä¸ä¼šäº§ç”Ÿè„æ•°æ®
  - å®‰å…¨ï¼šæŒ‰ user_id ä¸¥æ ¼éš”ç¦»
  - ç¼“å­˜ï¼šè‡ªåŠ¨å¤±æ•ˆå¯¹åº”çš„ List/Activity/Shelf ç¼“å­˜
  - è¾“å‡ºï¼šæ‰€æœ‰å†™å‘½ä»¤å‡å¸¦ `âš ï¸ ä¼šä¿®æ”¹ä½ çš„é˜…è¯»/æ”¶è—çŠ¶æ€` æ˜ç¡®æç¤º

---

## 4. éŸ³ä¹è®¢é˜…æ§åˆ¶å°ï¼ˆTG-BOT-MUSIC-1ï¼‰

> åŸºäº MUSIC-AUTOLOOP-2ï¼Œä¸ºéŸ³ä¹è®¢é˜…æä¾› Telegram æ§åˆ¶å‰ç«¯ã€‚

- èƒ½åŠ›æ¦‚è§ˆï¼š
  - æŸ¥çœ‹å½“å‰éŸ³ä¹è®¢é˜…åˆ—è¡¨
  - æŸ¥çœ‹å•ä¸ªè®¢é˜…è¯¦ç»†é…ç½®ï¼ˆç«™ç‚¹ã€è§„åˆ™ã€é¢‘ç‡ç­‰ï¼‰
  - æ‰‹åŠ¨è¯•è¿è¡Œè®¢é˜…ï¼ˆdry-runï¼Œé¢„è§ˆå°†è¦ä¸‹è½½çš„èµ„æºï¼‰
  - æ‰‹åŠ¨çœŸå®æ‰§è¡Œè®¢é˜…ï¼ˆè§¦å‘ä¸€æ¬¡è®¢é˜…ä»»åŠ¡ï¼‰
  - å¯ç”¨ / ç¦ç”¨è®¢é˜…
- ç‰¹æ€§ï¼š
  - å¤ç”¨è‡ªåŠ¨å¾ªç¯æ ¸å¿ƒæœåŠ¡ï¼Œä¿è¯è¡Œä¸ºä¸åå°ä¸€è‡´
  - æ‰€æœ‰æ“ä½œå‰å‡åšç”¨æˆ·ç»‘å®š & æƒé™æ£€æŸ¥

---

## 5. ä¸‹è½½ / è®¢é˜…æ§åˆ¶å°ï¼ˆDownload & Searchï¼‰

> å…·ä½“å‘½ä»¤è§†å®ç°ä¸ºå‡†ï¼Œæ­¤å¤„åªæè¿°èƒ½åŠ›èŒƒå›´ã€‚

- èƒ½åŠ›æ¦‚è§ˆï¼š
  - åœ¨ Telegram ä¸­å‘èµ·èµ„æºæœç´¢ï¼ˆå¤šç«™ç‚¹èšåˆï¼‰
  - å±•ç¤ºæœç´¢ç»“æœï¼ˆåç§° / ç«™ç‚¹ / å¤§å° / HR ç­‰å…ƒæ•°æ®ï¼‰
  - ä»æœç´¢ç»“æœä¸€é”®ï¼š
    - åˆ›å»ºä¸‹è½½ä»»åŠ¡ï¼Œæˆ–
    - åˆ›å»ºè®¢é˜…è§„åˆ™
  - ç®¡ç†ç°æœ‰ä¸‹è½½è®¢é˜…ï¼ˆåˆ—è¡¨ / è¯¦æƒ… / å¼€å¯ / ç¦ç”¨ï¼‰
- ç‰¹æ€§ï¼š
  - å¤ç”¨ External Indexer + Local Intel çš„åˆå¹¶æœç´¢ç»“æœ
  - åœ¨ TG ä¸­åš"æˆ‘è¦ä¸è¦è¿½è¿™ä¸ª / ä¸‹ä¸ä¸‹è¿™æ¡"çš„å¿«é€Ÿå†³ç­–

---

## 6. é€šçŸ¥ä¸ HR é£é™©æé†’ï¼ˆTelegram æ¸ é“ï¼‰

> TG åœ¨é€šçŸ¥ä½“ç³»ä¸­è¢«å®šä½ä¸º **"å…³é”®äº‹ä»¶çš„æ¨é€æ¸ é“"ï¼Œè€Œä¸æ˜¯å®Œæ•´é€šçŸ¥å®¢æˆ·ç«¯**ã€‚

### 6.1 ä¸‹è½½é€šçŸ¥ï¼ˆDOWNLOAD-NOTIFY-1ï¼‰

- Web é€šçŸ¥ç±»å‹ï¼š
  - è®¢é˜…å‘½ä¸­ï¼š`DOWNLOAD_SUBSCRIPTION_MATCHED` 
  - ä¸‹è½½å®Œæˆï¼š`DOWNLOAD_TASK_COMPLETED` 
  - HR é£é™©é¢„è­¦ï¼š`DOWNLOAD_HR_RISK` 
- Telegram æ¸ é“ï¼š
  - é»˜è®¤ä»…æ¨é€ **HR é£é™©** ç›¸å…³é€šçŸ¥ï¼š
    - H&R / HR / H3 / H5 ç­‰é«˜é£é™©ç§å­
    - æé†’ä¿ç§æ—¶é•¿ / æ¯”ä¾‹è¦æ±‚ / ä¸è¦éšä¾¿åˆ æº
  - æ˜¯å¦æ¨é€å¯é€šè¿‡ï¼š
    - ç¯å¢ƒå˜é‡
    - ç”¨æˆ·é€šçŸ¥åå¥½é…ç½®
    åŒå±‚æ§åˆ¶

### 6.2 é˜…è¯»é€šçŸ¥ï¼ˆREADING-NOTIFY-1ï¼‰

- æ ¸å¿ƒäº‹ä»¶ï¼š
  - æ¼«ç”»è¿½æ›´æœ‰æ–°ç« èŠ‚
  - TXT â†’ EBook å¯¼å…¥å®Œæˆ
  - TTS æœ‰å£°ä¹¦ç”Ÿæˆå®Œæˆ
- ä¸»è¦åœ¨ Web é€šçŸ¥ä¸­å¿ƒå±•ç¤ºï¼ŒTG å¯æŒ‰éœ€æ‰©å±•ï¼ˆå½“å‰ v1 ä¸å¼ºåˆ¶æ¨é€å…¨éƒ¨é˜…è¯»äº‹ä»¶ï¼‰

---

## 7. éç›®æ ‡ï¼ˆv1 æ˜ç¡®ä¸åšçš„ TG åŠŸèƒ½ï¼‰

> ä»¥ä¸‹æ˜¯åˆ»æ„ä¸çº³å…¥ v1 èŒƒå›´çš„èƒ½åŠ›ï¼Œé¿å…èŒƒå›´è†¨èƒ€ã€‚

- âŒ å®Œæ•´çš„ã€ŒTG ä¸‹è½½ä»»åŠ¡ä¸­å¿ƒã€
  - ä¾‹å¦‚ `/dl_tasks` / `/dl_task_detail` / `/dl_task_open` ç­‰åªè¯»/å¯å†™æ€»æ§å°
  - ç°é˜¶æ®µè®¤ä¸ºï¼š**ä¸‹è½½ä»»åŠ¡çš„ä¸»æˆ˜åœºåœ¨ Web**ï¼ŒTG æœ‰ HR é£é™©æé†’å³å¯
- âŒ ã€ŒTG é€šçŸ¥æ€»æ§åˆ¶å°ã€
  - å¦‚ `/notify` / `/notify_reading` / `/notify_download` ä¸€ç±»çš„é€šçŸ¥æ—¶é—´çº¿æ§åˆ¶å°
  - ç›®å‰ç”± Web `/notifications` å®Œæ•´æ‰¿æ‹…
- âŒ å¤æ‚å¤šæ­¥é…ç½®å‘å¯¼ / æ·±åº¦è¿ç»´æ“ä½œ
  - åŒ…æ‹¬æ’ä»¶ç®¡ç†ã€ç³»ç»Ÿè®¾ç½®ç­‰é‡äº¤äº’æ“ä½œ
  - çº¦æŸï¼šTG åªåšé«˜é¢‘ã€ä»·å€¼é«˜ã€æ“ä½œç®€å•çš„åŠ¨ä½œ

---

## 8. æœªæ¥å¯èƒ½çš„ v2+ æ–¹å‘ï¼ˆä»…ä½œè®°å½•ï¼‰

> ä»¥ä¸‹å†…å®¹ä»…ä¸ºå¤‡é€‰æ–¹å‘ï¼Œä¸ä»£è¡¨ä¸€å®šå®æ–½ã€‚

- TG-BOT-DOWNLOAD-1ï¼šä¸‹è½½ä»»åŠ¡åªè¯»æ€»æ§å°
  - `/dl_tasks` æŸ¥çœ‹é˜Ÿåˆ—
  - `/dl_task_detail` æŸ¥çœ‹ä»»åŠ¡è¯¦æƒ…/HR çŠ¶æ€
- TG-NOTIFY-CONSOLE-1ï¼šTelegram é€šçŸ¥æ—¶é—´çº¿
  - `/notify` æŸ¥çœ‹æœ€è¿‘é€šçŸ¥ï¼ˆå¤šç±»åˆ«æ··åˆï¼‰
  - `/notify_reading` / `/notify_download` æŒ‰ç±»åˆ«è¿‡æ»¤
- æ’ä»¶/ç³»ç»Ÿå‘Šè­¦æ¨é€ï¼š
  - Plugin å¥åº·çŠ¶å†µ / ç³»ç»Ÿé”™è¯¯ çš„ TG æé†’

---

## 9. é™„å½•ï¼šå‘½ä»¤ä¸€è§ˆè¡¨ï¼ˆv1ï¼‰

> ä»…åˆ—å‡º Telegram Bot v1 ä¸­ä¸ç”¨æˆ·ç›¸å…³çš„å…¬å¼€å‘½ä»¤ï¼Œå…·ä½“æ–‡æ¡ˆå’Œå‚æ•°è§ `BOT_TELEGRAM_COMMANDS_REFERENCE.md`ã€‚

### é˜…è¯»ä¸­å¿ƒå‘½ä»¤
- é˜…è¯»è¿›è¡Œä¸­ï¼š`/reading` `/reading_books` `/reading_audio` `/reading_manga` 
- é˜…è¯»æ˜ç»† & è·³è½¬ï¼š`/reading_detail <index>` `/reading_open <index>`
- é˜…è¯»æ´»åŠ¨æ—¶é—´çº¿ï¼š`/reading_recent` `/reading_recent_open <index>` 
- ä¹¦æ¶ï¼š`/shelf` `/shelf_books` `/shelf_audio` `/shelf_manga` 
- ä¹¦æ¶æ˜ç»† & è·³è½¬ï¼š`/shelf_detail <index>` `/shelf_open <index>`
- é˜…è¯»å†™æ“ä½œï¼š`/reading_done <index>` `/reading_fav <index>` `/shelf_unfav <index>`

### éŸ³ä¹è®¢é˜…æ§åˆ¶å°å‘½ä»¤
- éŸ³ä¹è®¢é˜…åˆ—è¡¨ï¼š`/music_subs`
- éŸ³ä¹è®¢é˜…è¯¦æƒ…ï¼š`/music_sub_detail <index>`
- éŸ³ä¹è®¢é˜…è¯•è¿è¡Œï¼š`/music_sub_dryrun <index>`
- éŸ³ä¹è®¢é˜…æ‰§è¡Œï¼š`/music_sub_run <index>`
- éŸ³ä¹è®¢é˜…å¯ç”¨/ç¦ç”¨ï¼š`/music_sub_enable <index>` `/music_sub_disable <index>`

### ä¸‹è½½æœç´¢/è®¢é˜…å‘½ä»¤
- èµ„æºæœç´¢ï¼š`/search <keyword>`
- æœç´¢ç»“æœæ“ä½œï¼š`/search_download <index>` `/search_subscribe <index>`
- ä¸‹è½½è®¢é˜…åˆ—è¡¨ï¼š`/dl_subs`
- ä¸‹è½½è®¢é˜…è¯¦æƒ…ï¼š`/dl_sub_detail <index>`
- ä¸‹è½½è®¢é˜…å¯ç”¨/ç¦ç”¨ï¼š`/dl_sub_enable <index>` `/dl_sub_disable <index>`

### ç³»ç»Ÿå‘½ä»¤
- ç”¨æˆ·ç»‘å®šï¼š`/bind`
- å¸®åŠ©ï¼š`/help` `/start`
- çŠ¶æ€ï¼š`/status`

---

**ğŸ‰ Telegram Bot v1 æ­£å¼å®Œç»“**  
v1.0 â€“ 2025-11
