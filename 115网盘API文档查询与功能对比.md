# 115网盘API文档查询与功能对比

## 📋 文档访问情况

### 文档链接
- **主页面**: https://www.yuque.com/115yun/open/qur839kyx9cgxpxi
- **状态**: ⚠️ 无法直接访问（可能需要登录或特定权限）

### 已知信息
根据代码库中的实现和VabHub-1版本的文档，我们可以总结出以下115网盘API端点：

## 🔍 已知的115网盘API端点

### 1. 认证相关API

根据VabHub-1版本的实现，115网盘使用以下认证端点：

| API端点 | 方法 | 功能 | 实现状态 |
|---------|------|------|----------|
| `https://passportapi.115.com/open/authDeviceCode` | POST | 获取设备码 | ✅ VabHub-1已实现 |
| `https://qrcodeapi.115.com/get/status/` | GET | 检查二维码状态 | ✅ VabHub-1已实现 |
| `https://passportapi.115.com/open/deviceCodeToToken` | POST | 设备码转令牌 | ✅ VabHub-1已实现 |
| `https://passportapi.115.com/open/refreshToken` | POST | 刷新令牌 | ✅ VabHub-1已实现 |

### 2. 文件管理API

#### 当前版本已实现的API

| API端点 | 方法 | 功能 | 实现状态 |
|---------|------|------|----------|
| `https://webapi.115.com/open/folder/get_info` | GET/POST | 获取文件(夹)详情 | ✅ 已实现 |
| `https://webapi.115.com/open/folder/list` | GET/POST | 获取文件列表 | ✅ 已实现 |
| `https://webapi.115.com/open/ufile/search` | GET | 搜索文件(夹) | ✅ 已实现 |
| `https://webapi.115.com/open/folder/add` | POST | 新建文件夹 | ✅ 已实现 |
| `https://webapi.115.com/open/file/delete` | POST | 删除文件(夹) | ✅ 已实现 |
| `https://webapi.115.com/open/file/rename` | POST | 重命名文件(夹) | ✅ 已实现 |
| `https://webapi.115.com/open/file/move` | POST | 移动文件(夹) | ✅ 已实现 |
| `https://webapi.115.com/open/file/copy` | POST | 复制文件(夹) | ✅ 已实现 |

#### VabHub-1版本中的API端点

| API端点 | 方法 | 功能 | 实现状态 |
|---------|------|------|----------|
| `https://proapi.115.com/open/ufile/files` | GET/POST | 列出文件 | ⚠️ 待对比 |
| `https://proapi.115.com/open/folder/get_info` | GET/POST | 获取文件夹信息 | ✅ 已实现（使用webapi） |
| `https://proapi.115.com/open/ufile/update` | POST | 重命名文件/目录 | ✅ 已实现（使用file/rename） |
| `https://proapi.115.com/open/ufile/move` | POST | 移动文件/目录 | ✅ 已实现（使用file/move） |
| `https://proapi.115.com/open/ufile/copy` | POST | 复制文件/目录 | ✅ 已实现（使用file/copy） |
| `https://proapi.115.com/open/ufile/delete` | POST | 删除文件/目录 | ✅ 已实现（使用file/delete） |

**注意**: VabHub-1使用`proapi.115.com`，当前版本使用`webapi.115.com`，需要确认哪个是正确的API域名。

### 3. 文件上传/下载API

#### VabHub-1版本中的端点

| API端点 | 方法 | 功能 | 实现状态 |
|---------|------|------|----------|
| `https://proapi.115.com/pc/ufile` | POST | 文件上传 | 🚧 待实现 |
| `https://proapi.115.com/pc/file` | GET | 文件下载 | 🚧 待实现 |
| `https://proapi.115.com/pc/files` | GET | 文件列表 | ✅ 已实现（使用folder/list） |

## 📊 API域名对比

### 当前版本使用的域名
- **API域名**: `https://webapi.115.com`
- **用途**: 文件管理API

### VabHub-1版本使用的域名
- **API域名**: `https://proapi.115.com`
- **用途**: 文件管理API和文件上传/下载

### 需要确认的问题
1. `webapi.115.com`和`proapi.115.com`的区别是什么？
2. 哪个域名是官方推荐使用的？
3. 两个域名的API端点是否完全兼容？

## 🔍 从代码库中发现的API功能

### 1. 文件上传功能

根据VabHub-1的实现，115网盘支持：
- ✅ 秒传检测（基于文件哈希值）
- ✅ 分片上传（大文件支持）
- ✅ 断点续传
- ✅ 进度回调
- ✅ 并发上传

### 2. 文件下载功能

根据VabHub-1的实现，115网盘支持：
- ✅ 带进度显示的文件下载
- ✅ 分片下载
- ✅ 断点续传

### 3. 高级功能

根据VabHub-1的实现，115网盘支持：
- ✅ 二次认证（特定文件）
- ✅ 错误处理和重试机制
- ✅ 令牌自动刷新

## 🚧 待实现的API功能

### 高优先级

1. **文件上传API**
   - 实现文件上传到115网盘
   - 支持秒传检测
   - 支持分片上传
   - 支持断点续传
   - 支持进度回调

2. **文件下载API**
   - 实现从115网盘下载文件
   - 支持分片下载
   - 支持断点续传
   - 支持进度回调

3. **OAuth2认证**
   - 实现OAuth2授权流程
   - 实现Access Token刷新
   - 实现Token过期处理

### 中优先级

4. **文件分享API**
   - 实现文件分享
   - 实现分享链接生成
   - 实现分享权限管理

5. **存储空间查询API**
   - 实现存储空间使用情况查询
   - 实现存储空间统计

6. **用户信息API**
   - 实现用户信息获取
   - 实现用户权限查询

## 📝 建议

### 1. 文档访问

由于无法直接访问115网盘开放API文档，建议：
- 联系115网盘开放平台获取API文档
- 申请开发者权限
- 获取完整的API端点列表

### 2. API域名确认

需要确认：
- `webapi.115.com`和`proapi.115.com`的区别
- 哪个域名是官方推荐使用的
- 两个域名的API端点是否完全兼容

### 3. API功能对比

建议对比：
- 当前版本实现的API
- VabHub-1版本实现的API
- 115网盘官方API文档
- 找出缺失的API功能

### 4. 测试验证

建议测试：
- 所有已实现的API端点
- API响应格式
- 错误处理
- 性能优化

## 🎯 下一步行动

1. **获取完整API文档**
   - 联系115网盘开放平台
   - 申请开发者权限
   - 获取完整的API端点列表

2. **对比API实现**
   - 对比当前版本和VabHub-1版本的API实现
   - 找出差异和缺失的功能
   - 统一API域名和端点

3. **实现缺失功能**
   - 实现文件上传API
   - 实现文件下载API
   - 实现OAuth2认证

4. **测试和优化**
   - 测试所有API功能
   - 优化错误处理
   - 优化性能

## 📚 参考资源

- **115网盘开放API文档**: https://www.yuque.com/115yun/open/qur839kyx9cgxpxi
- **VabHub-1 115网盘功能指南**: `VabHub-1/U115_CLOUD_FUNCTIONALITY_GUIDE.md`
- **当前版本115网盘API客户端**: `VabHub/backend/app/core/cloud_storage/providers/cloud_115_api.py`
- **VabHub-1 115网盘提供商**: `VabHub-1/backend/app/core/cloud_storage/providers/cloud_115.py`

## 🔗 相关文档

- [115网盘API完整功能集成总结](./115网盘API完整功能集成总结.md)
- [115网盘API-新建文件夹功能集成](./115网盘API-新建文件夹功能集成.md)
- [115网盘API集成完成总结](./115网盘API集成完成总结.md)

