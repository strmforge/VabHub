# VabHub 环境变量配置示例
# 复制此文件为 .env 并修改配置
# 
# 标记说明：
#   [required]    - 必须配置
#   [recommended] - 建议配置
#   [optional]    - 可选配置
#
# 详见 docs/CONFIG_OVERVIEW.md

# ============== Core & Database ==============
# 核心配置：应用基础、数据库、安全密钥

# [required] 应用密钥（首次启动会自动生成安全密钥）
SECRET_KEY=change-this-in-production-use-strong-random-string
JWT_SECRET_KEY=change-this-in-production-use-another-strong-random-string

# [recommended] 应用基础 URL
APP_BASE_URL=http://localhost:8080

# [recommended] Web 前端基础地址（用于 Telegram Bot 生成跳转链接）
APP_WEB_BASE_URL=http://localhost:5173

# [optional] Demo 模式（true/false）
# 启用后：禁止外部下载/网盘操作，显示 Demo 横幅
APP_DEMO_MODE=false

# [recommended] 服务器配置
PORT=8092
WORKERS=4

# [required] 数据库配置
# PostgreSQL (Docker 部署推荐)
# ⚠️ 安全警告：请务必修改密码！
DATABASE_URL=postgresql://vabhub:CHANGE-ME-use-strong-random-password@db:5432/vabhub

# SQLite (本地开发)
# DATABASE_URL=sqlite:///./vabhub.db

# 数据库连接参数（用于 docker-compose）
DB_HOST=db
DB_PORT=5432
DB_NAME=vabhub
DB_USER=vabhub
# ⚠️ 安全警告：请务必修改此密码！
DB_PASSWORD=CHANGE-ME-use-strong-random-password

# ============== Redis 配置 ==============
# [recommended] Redis 缓存加速
REDIS_URL=redis://redis:6379/0
REDIS_ENABLED=true
RSSHUB_ENABLED=true
RSSHUB_BASE_URL=https://rsshub.app

# ============== 存储路径配置 ==============
# 基础存储路径
STORAGE_PATH=./data
TEMP_PATH=./tmp

# 电子书库路径
EBOOK_LIBRARY_ROOT=./data/ebooks

# 媒体库路径
MOVIE_LIBRARY_ROOT=./data/library/movies
TV_LIBRARY_ROOT=./data/library/tv
ANIME_LIBRARY_ROOT=./data/library/anime
SHORT_DRAMA_LIBRARY_ROOT=./data/library/short_drama
COMIC_LIBRARY_ROOT=./data/library/comics
MUSIC_LIBRARY_ROOT=./data/library/music

# 小说上传路径
NOVEL_UPLOAD_ROOT=./data/novel_uploads

# 统一收件箱配置
INBOX_ROOT=./data/inbox
INBOX_ENABLE_VIDEO=true
INBOX_ENABLE_EBOOK=true
INBOX_ENABLE_AUDIOBOOK=true
INBOX_ENABLE_NOVEL_TXT=true
INBOX_ENABLE_COMIC=false
INBOX_ENABLE_MUSIC=false
INBOX_DETECTION_MIN_SCORE=0.4
INBOX_SCAN_MAX_ITEMS=500
INBOX_PT_CATEGORY_DETECTOR_ENABLED=true

# TTS 相关路径
SMART_TTS_OUTPUT_ROOT=./data/tts_output

# ============== TTS 配置 ==============
# 基础 TTS 配置
SMART_TTS_ENABLED=false
SMART_TTS_PROVIDER=dummy
SMART_TTS_DEFAULT_VOICE=
SMART_TTS_MAX_CHAPTERS=200
SMART_TTS_CHAPTER_STRATEGY=per_chapter

# TTS 存储阈值配置
SMART_TTS_STORAGE_WARN_SIZE_GB=10.0
SMART_TTS_STORAGE_CRITICAL_SIZE_GB=30.0

# TTS 存储自动清理配置
SMART_TTS_STORAGE_AUTO_ENABLED=false
SMART_TTS_STORAGE_AUTO_MIN_INTERVAL_HOURS=12.0
SMART_TTS_STORAGE_AUTO_ONLY_WHEN_ABOVE_WARN=true
SMART_TTS_STORAGE_AUTO_DRY_RUN=true

# TTS 限流配置
SMART_TTS_RATE_LIMIT_ENABLED=false
SMART_TTS_MAX_DAILY_REQUESTS=0
SMART_TTS_MAX_DAILY_CHARACTERS=0
SMART_TTS_MAX_REQUESTS_PER_RUN=0

# TTS Job Runner 配置
SMART_TTS_JOB_RUNNER_ENABLED=false
SMART_TTS_JOB_RUNNER_MAX_JOBS_PER_RUN=5

# HTTP TTS Provider 配置
SMART_TTS_HTTP_ENABLED=false
SMART_TTS_HTTP_BASE_URL=
SMART_TTS_HTTP_METHOD=POST
SMART_TTS_HTTP_TIMEOUT=15
SMART_TTS_HTTP_HEADERS=
SMART_TTS_HTTP_BODY_TEMPLATE=
SMART_TTS_HTTP_RESPONSE_MODE=binary
SMART_TTS_HTTP_RESPONSE_AUDIO_FIELD=audio

# ============== 外部 API 配置 ==============
# [required] TMDB API Key（影视元数据）
# 获取地址: https://www.themoviedb.org/settings/api
TMDB_API_KEY=
TMDB_API_DOMAIN=api.themoviedb.org
TMDB_IMAGE_DOMAIN=image.tmdb.org
TMDB_LOCALE=zh
META_CACHE_EXPIRE=0
SCRAP_FOLLOW_TMDB=true
TMDB_SCRAP_ORIGINAL_IMAGE=false

# TVDB API Key
TVDB_V4_API_KEY=ed2aa66b-7899-4677-92a7-67bc9ce3d93a
TVDB_V4_API_PIN=

# FanArt API Key
FANART_API_KEY=d2d31f9ecabea050fc7d68aa3146015f
FANART_ENABLE=false
FANART_LANG=zh,en

# OpenSubtitles API Key（字幕）
OPENSUBTITLES_API_KEY=
OPENSUBTITLES_USERNAME=
OPENSUBTITLES_PASSWORD=

# OCR 服务配置
OCR_HOST=https://movie-pilot.org
OCR_USE_LOCAL=false

# ============== 深度学习配置 ==============
DEEP_LEARNING_ENABLED=true
DEEP_LEARNING_GPU_ENABLED=true
DEEP_LEARNING_MODEL_TYPE=ncf
DEEP_LEARNING_EMBEDDING_DIM=64
DEEP_LEARNING_HIDDEN_DIMS=128,64,32
DEEP_LEARNING_DROPOUT_RATE=0.2
DEEP_LEARNING_LEARNING_RATE=0.001
DEEP_LEARNING_BATCH_SIZE=256
DEEP_LEARNING_EPOCHS=100
DEEP_LEARNING_EARLY_STOPPING_PATIENCE=10
DEEP_LEARNING_MODEL_PATH=./models/deep_learning

# 实时推荐系统配置
REALTIME_RECOMMENDATION_ENABLED=true
REALTIME_BUFFER_SIZE=10000
REALTIME_SESSION_TIMEOUT_MINUTES=30
REALTIME_UPDATE_INTERVAL_MINUTES=5
REALTIME_BATCH_SIZE=100
REALTIME_TIME_DECAY_FACTOR=0.95
REALTIME_FEATURE_CACHE_TTL=3600

# A/B测试配置
AB_TESTING_ENABLED=true
AB_TESTING_MIN_SAMPLE_SIZE=100
AB_TESTING_SIGNIFICANCE_LEVEL=0.05
AB_TESTING_EVALUATION_K=10

# ============== Intel / Shared Intelligence 配置 ==============
INTEL_SCHEDULER_ENDPOINT=https://mesh.hbnetwork.top
INTEL_INTEL_ENDPOINT=https://intel.hbnetwork.top
INTEL_SNAPSHOT_BASE_URL=https://snap.hbnetwork.top
INTEL_FALLBACK_TO_LOCAL=true

# ============== 下载器配置 ==============
# 下载器标签配置（用于标识VabHub添加的下载任务）
TORRENT_TAG=VABHUB

# qBittorrent
# QB_URL=http://localhost:8080
# QB_USERNAME=admin
# QB_PASSWORD=adminadmin

# Transmission
# TR_URL=http://localhost:9091
# TR_USERNAME=admin
# TR_PASSWORD=admin

# ============== 115 网盘配置 ==============
# CLOUD_115_COOKIE=your_cookie_here

# ============== 媒体服务器配置 ==============
RECOGNIZE_SOURCE=themoviedb
WALLPAPER=tmdb
CUSTOMIZE_WALLPAPER_API_URL=
MEDIASERVER_SYNC_INTERVAL=6

# ============== 媒体库跳转配置 ==============
# [optional] 用于电视墙海报点击的 LAN/WAN 智能路由
# MEDIA_LIBRARY_TYPE: 媒体库类型，支持 emby/jellyfin/none
MEDIA_LIBRARY_TYPE=none
# MEDIA_LIBRARY_TYPE=emby

# [optional] MEDIA_LIBRARY_BASE_URL: 媒体库 Web 基础地址
# 示例: MEDIA_LIBRARY_BASE_URL=http://192.168.50.10:8096
MEDIA_LIBRARY_BASE_URL=

# [optional] MEDIA_LIBRARY_SEARCH_PATH_TEMPLATE: 搜索页路径模板
MEDIA_LIBRARY_SEARCH_PATH_TEMPLATE=/web/index.html#!/search.html?query={query}

# [optional] LAN_CIDR_LIST: 内网网段列表，逗号分隔
LAN_CIDR_LIST=192.168.0.0/16,10.0.0.0/8,172.16.0.0/12

# ============== 安全和认证配置 ==============
AUXILIARY_AUTH_ENABLE=false
GLOBAL_IMAGE_CACHE=false
GLOBAL_IMAGE_CACHE_DAYS=7

# ============== 统计配置 ==============
SUBSCRIBE_STATISTIC_SHARE=true
WORKFLOW_STATISTIC_SHARE=true
PLUGIN_STATISTIC_SHARE=true

# ============== 性能配置 ==============
BIG_MEMORY_MODE=false
DB_WAL_ENABLE=true
MAX_UPLOAD_SIZE=10737418240

# ============== 自动更新配置 ==============
VABHUB_AUTO_UPDATE=false
AUTO_UPDATE_RESOURCE=true

# ============== 插件系统配置 ==============
PLUGIN_AUTO_RELOAD=false
PLUGIN_REMOTE_INSTALL_ENABLED=false
PLUGIN_REMOTE_ALLOWED_HOSTS=
PLUGIN_INSTALL_MAX_BYTES=262144

# ============== 日志配置 ==============
LOG_LEVEL=INFO
LOG_MAX_FILE_SIZE=5
LOG_BACKUP_COUNT=3
LOG_FILE_FORMAT=【%(levelname)s】%(asctime)s - %(message)s

# ============== 代理配置 ==============
GITHUB_PROXY=
PIP_PROXY=
SECURITY_IMAGE_DOMAINS=

# ============== 其他配置 ==============
APP_DOMAIN=
GITHUB_TOKEN=
TEST_ALL_REPORT_PATH=./reports/test_all-latest.json

# ============== Telegram Bot 配置 ==============
# Bot Token（从 @BotFather 获取）
TELEGRAM_BOT_TOKEN=
# 是否启用 Telegram Bot (true/false)
TELEGRAM_BOT_ENABLED=false
# 可选：Webhook URL
TELEGRAM_BOT_WEBHOOK_URL=
# 可选：代理地址，例如 http://127.0.0.1:7890
TELEGRAM_BOT_PROXY=
# 可选：白名单，填 Telegram 用户 ID 或用户名，逗号分隔
TELEGRAM_BOT_ALLOWED_USERS=

# ============== 通知推送配置 ==============
# 下载通知 Telegram 推送控制 (true/false)
# 默认只推送 HR 风险通知，避免噪音
NOTIFY_TELEGRAM_DOWNLOAD_SUBSCRIPTION=false
NOTIFY_TELEGRAM_DOWNLOAD_COMPLETION=false
NOTIFY_TELEGRAM_DOWNLOAD_HR_RISK=true

# ============== 前端配置 ==============
# API 基础 URL（前端使用）
VITE_API_BASE_URL=http://localhost:8000/api

# ============== Docker 相关 ==============
# Compose 项目名称
COMPOSE_PROJECT_NAME=vabhub

# ============== AI Orchestrator ====================
# AI 总控层：驱动 AI 订阅助手、AI 故障医生、AI 整理顾问、AI 阅读助手
# 所有 AI 输出仅为只读建议，不会自动执行任何操作
# 详见 docs/CONFIG_OVERVIEW.md §3.1 和 docs/FUTURE_AI_OVERVIEW.md

# [optional] 总控开关
AI_ORCH_ENABLED=false

# [optional] LLM 提供者类型（目前仅支持 http）
AI_ORCH_LLM_PROVIDER=http

# [recommended] LLM API 端点 URL（启用 AI 功能时建议配置）
# 示例：
#   OpenAI: https://api.openai.com/v1/chat/completions
#   Azure: https://your-resource.openai.azure.com/openai/deployments/your-deployment/chat/completions?api-version=2024-02-15-preview
#   硅基流动: https://api.siliconflow.cn/v1/chat/completions
AI_ORCH_LLM_ENDPOINT=

# [recommended] LLM API Key（启用 AI 功能时建议配置）
AI_ORCH_LLM_API_KEY=

# [recommended] LLM 模型名称
# 示例：gpt-4o-mini, gpt-4o, qwen-plus, deepseek-chat
AI_ORCH_LLM_MODEL=

# [optional] LLM 请求超时（秒）
AI_ORCH_LLM_TIMEOUT=30

# [optional] LLM 最大 token 数
AI_ORCH_LLM_MAX_TOKENS=2048

# [optional] 调试日志开关
AI_ORCH_DEBUG_LOG=false
