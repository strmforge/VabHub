meta:
  id: discuzx
  name: DiscuzX通用配置
  family: discuzx
  version: 1.0.0
  domains: []  # 通用配置，不限制域名

verify:
  any:
    - meta_generator_equals: "Discuz!"
    - title_contains: "Discuz!"
    - selector_exists: "div.torrent_list"
    - selector_exists: "table.torrent_list"

parse:
  list:
    row: "table.torrent_list > tbody > tr, div.torrent_list > div.torrent_item"
    fields:
      title_raw:
        selector: "a[href*='viewthread.php?tid='], a[href*='thread-']"
        text: true
      size_bytes:
        selector: "td.size, span.size"
        text: true
        transform: "size"
      seeders:
        selector: "td.seeders, span.seeders"
        text: true
        transform: "int"
      leechers:
        selector: "td.leechers, span.leechers"
        text: true
        transform: "int"
      upload_time:
        selector: "td.time, span.time"
        text: true
  
  detail:
    fields:
      title:
        selector: "h1.thread_title, div.thread_title"
        text: true
      description:
        selector: "div.post_content, div.message"
        text: true
      download_link:
        selector: "a[href*='attachment.php?aid='], a[href*='download.php?']"
        attr: "href"
  
  user:
    fields:
      username:
        selector: "span.username, a.username"
        text: true
      upload:
        selector: "td.upload, span.upload"
        text: true
        transform: "size"
      download:
        selector: "td.download, span.download"
        text: true
        transform: "size"
      ratio:
        selector: "td.ratio, span.ratio"
        text: true
        transform: "float"
      seeding:
        selector: "td.seeding, span.seeding"
        text: true
        transform: "int"

