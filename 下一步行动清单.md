# 下一步行动清单

**制定时间**: 2025-01-XX  
**优先级**: 按重要性排序

---

## 🔴 立即执行（本周）

### 1. 修复API调用错误 ⭐⭐⭐⭐⭐

**状态**: ✅ **已修复**

**问题**: `search.py` 中调用了不存在的 `search_enhanced()` 方法

**修复**: 已改为使用现有的 `search()` 方法

---

### 2. 运行前后端对齐检查 ⭐⭐⭐⭐⭐

**优先级**: 最高  
**预计时间**: 30分钟

**执行步骤**:
```bash
# 1. 启动后端服务
cd VabHub/backend
python main.py

# 2. 在另一个终端运行检查
cd VabHub/backend
python tools/check_ui_backend_alignment.py \
  --openapi http://localhost:8000/openapi.json \
  --expected tools/ui_expected_endpoints.txt \
  --output alignment_report.json

# 3. 查看报告
cat alignment_report.json
```

**预期结果**:
- 生成对齐检查报告
- 发现API不一致问题
- 修复缺失的端点

---

### 3. 运行实际场景测试 ⭐⭐⭐⭐

**优先级**: 高  
**预计时间**: 1-2小时

**测试脚本**:
- `scripts/test_hmac_signature.py` ✅ 已创建
- `scripts/test_douban_fallback.py` ✅ 已创建
- `scripts/test_chart_row_integration.py` ✅ 已创建

**执行步骤**:
```bash
cd VabHub/backend
python scripts/run_all_tests.py
```

**预期结果**:
- 所有测试通过
- 验证功能正常工作

---

### 4. 测试速度限制功能 ⭐⭐⭐⭐

**优先级**: 高  
**预计时间**: 1小时

**测试内容**:
1. 测试全局速度限制设置/获取
2. 测试单任务速度限制
3. 验证速度限制在下载器中生效

**测试方法**:
```bash
# 使用curl或Postman测试API端点
# 或创建测试脚本
```

---

## 🟡 近期执行（下周）

### 5. 测试SSE搜索功能 ⭐⭐⭐

**优先级**: 中  
**预计时间**: 1小时

**测试内容**:
1. 测试实时进度推送
2. 验证多源索引器搜索
3. 检查错误处理

**测试方法**:
- 使用浏览器测试SSE端点
- 或使用Postman/curl测试

---

### 6. 测试新站点配置解析 ⭐⭐⭐

**优先级**: 中  
**预计时间**: 2-3小时

**测试内容**:
1. 在实际站点上测试4种新站点类型
2. 验证解析准确率
3. 优化选择器规则

**新增站点类型**:
- NexusProject
- NexusRabbit
- Small Horse
- TNode

---

### 7. 系统性能优化 ⭐⭐

**优先级**: 中  
**预计时间**: 2-3天

**优化内容**:
1. 数据库查询优化
2. 缓存策略优化
3. API响应时间优化

---

## 🟢 可选执行（后续）

### 8. 功能完善

**优先级**: 低  
**预计时间**: 1-2周

**完善内容**:
1. 搜索系统增强
2. 下载管理增强
3. 系统监控完善

---

## 📋 执行建议

### 本周重点

1. **修复API调用错误** ✅ 已完成
2. **运行前后端对齐检查** - 确保API一致性
3. **运行实际场景测试** - 验证功能正常
4. **测试速度限制功能** - 验证新功能

### 下周重点

5. **测试SSE搜索功能** - 验证优化效果
6. **测试新站点配置** - 验证解析准确率
7. **系统性能优化** - 提升系统性能

---

## 📋 总结

### ✅ 已完成

- 主要功能开发完成 ✅
- API调用错误修复 ✅
- 代码质量良好 ✅
- 测试脚本就绪 ✅

### ⏳ 待执行

- 前后端对齐检查 ⚠️
- 实际场景测试 ⏳
- 功能验证测试 ⏳

### 📊 预期成果

- **系统质量**: 提升
- **功能完整性**: 提升
- **用户体验**: 改善

---

**文档生成时间**: 2025-01-XX  
**建议**: 按优先级执行，确保质量
