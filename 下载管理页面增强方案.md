# 下载管理页面增强方案

## 📊 现状分析

### 现有功能
- ✅ 基础的下载列表显示
- ✅ WebSocket实时更新
- ✅ 基本的进度条、速度、ETA显示
- ✅ 暂停/恢复、删除操作

### 缺失功能（对比MoviePilot）
- ❌ 标签过滤（只显示VABHUB标签的任务）
- ❌ 状态过滤和搜索
- ❌ 更详细的进度显示（速度图表、详细统计）
- ❌ 队列管理（上移、下移、置顶）
- ❌ 批量操作
- ❌ 下载统计卡片
- ❌ 标签页分类（正在下载、已完成、已暂停、失败）

## 🎯 增强方案

### 1. 前端增强

#### 1.1 下载管理页面 (`Downloads.vue`)
- 添加统计卡片（正在下载、已暂停、已完成、总速度）
- 添加标签页分类（正在下载、已完成、已暂停、失败）
- 添加过滤工具栏（搜索、状态过滤、标签过滤）
- 添加批量操作按钮

#### 1.2 下载列表组件 (`DownloadList.vue`)
- 增强进度显示（更详细的统计信息）
- 添加队列管理按钮（上移、下移、置顶）
- 添加批量选择功能
- 优化UI布局（类似MoviePilot风格）

#### 1.3 下载进度卡片组件（新建）
- 创建 `DownloadProgressCard.vue` 组件
- 显示详细进度信息
- 速度图表（可选）
- 详细统计（已下载、总大小、平均速度、已用时间）

### 2. 后端增强（可选）

#### 2.1 API增强
- 添加标签过滤参数（需要从下载器获取标签信息）
- 添加队列管理API（上移、下移、置顶）
- 添加批量操作API

#### 2.2 服务层增强
- 从下载器获取标签信息
- 实现队列管理逻辑
- 实现批量操作逻辑

## 📝 实施步骤

1. **第一阶段**：前端UI增强
   - 增强 `Downloads.vue` 页面
   - 增强 `DownloadList.vue` 组件
   - 添加统计卡片和标签页

2. **第二阶段**：功能增强
   - 添加过滤和搜索功能
   - 添加批量操作功能
   - 添加队列管理功能（如果下载器支持）

3. **第三阶段**：后端支持（可选）
   - 添加标签过滤API
   - 添加队列管理API
   - 添加批量操作API

## ⚠️ 注意事项

1. **标签过滤**：
   - 标签信息存储在下载器中，不在数据库
   - 需要从下载器API获取标签信息
   - 可以通过 `DownloaderClient.get_torrent_info()` 获取标签

2. **队列管理**：
   - qBittorrent 支持队列优先级
   - Transmission 支持队列顺序
   - 需要调用下载器API实现

3. **批量操作**：
   - 需要后端API支持批量操作
   - 前端需要实现选择功能

## 🚀 优先级

1. **高优先级**：前端UI增强、过滤和搜索
2. **中优先级**：批量操作、详细进度显示
3. **低优先级**：队列管理、速度图表

