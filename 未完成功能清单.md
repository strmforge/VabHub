# VabHub 未完成功能清单

## 📋 概述

本文档汇总了VabHub系统中所有未完成的功能，包括：
- 文档中标记的待完成工作
- 代码中的TODO标记
- 功能对比中缺失的功能

---

## 🔴 高优先级未完成功能

### 1. DNS over HTTPS (DOH) 支持 ⚠️ 待实现

**来源**: `TMDB代理支持实现总结.md`

**状态**: 配置项已添加，功能待实现

**功能描述**:
- DNS over HTTPS域名解析
- 减少DNS污染
- 提升网络连通性

**配置项**:
- `DOH_ENABLE`: 是否启用DOH
- `DOH_DOMAINS`: DOH域名列表（已配置：api.themoviedb.org, api.tmdb.org等）
- `DOH_RESOLVERS`: DOH解析服务器列表

**优先级**: 🔴 高

---

### 2. OCR功能增强 ⚠️ 部分完成

**来源**: `OCR功能集成总结.md`

**已完成**:
- ✅ OpenCD站点（6位验证码）
- ✅ HDSky站点（6位验证码）
- ✅ 基础OCR引擎（PaddleOCR + 外部服务）

**待完成**:
- [ ] 其他需要验证码的PT站点
- [ ] 通用验证码检测和识别
- [ ] 验证码识别成功率统计
- [ ] 自动调整重试次数
- [ ] 验证码识别缓存（相同hash）
- [ ] 前端OCR配置界面
- [ ] 显示OCR引擎状态
- [ ] 测试OCR功能

**优先级**: 🔴 高

---

### 3. 代理功能增强 ⚠️ 部分完成

**来源**: `TMDB代理支持实现总结.md`

**已完成**:
- ✅ TMDB代理支持
- ✅ 统一HTTP客户端工具

**待完成**:
- [ ] Github API代理支持（系统更新时）
- [ ] 代理健康检查
- [ ] 代理自动切换（多个代理）

**说明**: 豆瓣API不需要代理支持，已从待完成清单中移除。

**优先级**: 🔴 高

---

### 4. 订阅刷新优化增强 ⚠️ 需增强

**来源**: `MoviePilot功能对比与开发计划.md`, `VabHub相比MoviePilot还缺少的功能.md`

**已完成**:
- ✅ 基础增量刷新实现
- ✅ 智能刷新间隔

**待完成**:
- [ ] 刷新性能进一步优化
- [ ] 刷新状态监控完善
- [ ] 刷新历史记录

**优先级**: 🔴 高

---

## 🟡 中优先级未完成功能

### 5. 仪表盘增强 ⚠️ 部分实现

**来源**: `VabHub相比MoviePilot还缺少的功能.md`

**已完成**:
- ✅ 基础统计卡片
- ✅ 可拖拽模块（已实现）

**待完成**:
- [ ] 详细媒体类型/数量统计
- [ ] 系统资源实时图表（CPU/内存/网络）
- [ ] 下载器状态聚合统计
- [ ] 插件集成完善

**优先级**: 🟡 中

---

### 6. 推荐功能增强 ⚠️ 部分实现

**来源**: `VabHub相比MoviePilot还缺少的功能.md`

**已完成**:
- ✅ 发现页面
- ✅ TMDB推荐
- ✅ 豆瓣推荐

**待完成**:
- [ ] Bangumi推荐完善
- [ ] 个性化配置完善

**优先级**: 🟡 中

---

### 7. 探索功能增强 ⚠️ 部分实现

**来源**: `VabHub相比MoviePilot还缺少的功能.md`

**已完成**:
- ✅ 发现页面
- ✅ 基础筛选

**待完成**:
- [ ] 多维度筛选完善
- [ ] 排序功能完善
- [ ] Bangumi探索完善

**优先级**: 🟡 中

---

### 8. 音乐功能完善 ⚠️ 部分实现

**来源**: 代码TODO标记

**已完成**:
- ✅ 音乐搜索
- ✅ 音乐榜单
- ✅ 音乐库管理
- ✅ 音乐推荐（基础）

**待完成**:
- [ ] 音乐推荐算法完善（后端TODO）
- [ ] 音乐元数据管理增强
- [ ] 音乐分类和标签管理

**说明**: 音乐播放功能由Emby/Jellyfin/Plex等媒体库提供，VabHub主要负责音乐文件的搜索、下载、整理和管理。

**优先级**: 🟡 中

---

## 🟢 低优先级未完成功能

### 9. 文件格式转换 ❌ 缺失（非必需功能）

**来源**: `VabHub相比MoviePilot还缺少的功能.md`

**功能描述**:
文件格式转换是指将媒体文件从一种格式转换为另一种格式，包括：
- **视频编码转换**: 如H.264转H.265（HEVC）、AVC转AV1等
- **音频编码转换**: 如MP3转FLAC、AAC转OPUS等
- **容器格式转换**: 如MKV转MP4、AVI转MP4等
- **批量转换**: 支持批量处理多个文件

**使用场景**:
1. **存储优化**: 将高码率视频转换为低码率以节省空间
2. **兼容性**: 转换不兼容的格式以支持更多播放设备
3. **标准化**: 统一媒体库中的文件格式
4. **压缩**: 减少文件大小，节省存储空间

**为什么不是必需功能**:
1. **媒体库已支持转码**: Emby/Jellyfin/Plex等媒体库本身支持实时转码，无需预先转换
2. **下载时已选择格式**: 用户从PT站下载时通常已选择合适格式
3. **资源消耗大**: 转码需要大量CPU/GPU资源，不适合在媒体管理平台中实现
4. **专业工具更合适**: 专门的转码工具（如HandBrake、FFmpeg）功能更强大

**MoviePilot状态**: ❌ 也未实现此功能

**VabHub状态**:
- ❌ 文件格式转换缺失
- ✅ 但已有FFmpeg辅助功能（视频缩略图、音频提取、字幕提取等）

**优先级**: 🟢 低（非必需，可考虑未来实现）
**建议**: 如果需要，可以考虑实现基础的格式转换功能，但建议使用专业转码工具

**详细说明**: 参见 `功能说明-音乐播放和文件格式转换.md`

---

### 10. 文件清理功能增强 ⚠️ 部分实现

**来源**: `VabHub相比MoviePilot还缺少的功能.md`, `往期版本遗漏功能清单.md`

**已完成**:
- ✅ 重复文件检测
- ✅ 文件清理服务（已实现）

**待完成**:
- [ ] 自动清理空文件夹
- [ ] 清理孤立文件
- [ ] 清理临时文件（更完善）

**优先级**: 🟢 低

---

## 🔧 代码中的TODO标记

### 后端TODO

1. **系统更新模块** (`backend/app/api/system_update.py`):
   - [ ] 从数据库读取配置（目前使用环境变量）
   - [ ] 从构建信息中获取build_time
   - [ ] 实现源代码部署的重启逻辑

2. **STRM生成器** (`backend/app/modules/strm/generator.py`):
   - [ ] 从subtitle_file提取pick_code
   - [ ] 实现字幕文件下载地址获取

3. **文件浏览器** (`backend/app/api/file_browser.py`):
   - [ ] 实现完整的刮削功能

4. **音乐服务** (`backend/app/modules/music/service.py`):
   - [ ] 实现真实的推荐算法

### 前端TODO

1. **系统更新页面** (`frontend/src/pages/SystemUpdate.vue`):
   - [ ] 保存更新配置到数据库
   - [ ] 保存更新模式到数据库

2. **文件操作对话框** (`frontend/src/components/file-browser/FileOperationDialog.vue`):
   - [ ] 从上下文获取storage
   - [ ] 从上下文获取source_storage

3. **音乐组件**:
   - [ ] 音乐播放功能（多个组件）
   - [ ] 获取当前用户ID

---

## 📊 功能完成度统计

### 高优先级功能
- ✅ 已完成: 0/4 (0%)
- ⚠️ 部分完成: 4/4 (100%)
- ❌ 未完成: 0/4 (0%)

### 中优先级功能
- ✅ 已完成: 0/4 (0%)
- ⚠️ 部分完成: 4/4 (100%)
- ❌ 未完成: 0/4 (0%)

### 低优先级功能
- ✅ 已完成: 0/2 (0%)
- ⚠️ 部分完成: 2/2 (100%)
- ❌ 未完成: 0/2 (0%)

---

## 🎯 实施建议

### 第一阶段：高优先级功能（1-2周）

1. **DNS over HTTPS (DOH) 支持** (2-3天)
   - 实现DOH域名解析
   - 集成到HTTP客户端
   - 添加配置界面

2. **OCR功能增强** (3-5天)
   - 添加更多PT站点支持
   - 实现验证码识别统计
   - 实现前端配置界面

3. **代理功能增强** (2-3天)
   - 豆瓣API代理支持
   - Github API代理支持
   - 代理健康检查

4. **订阅刷新优化** (2-3天)
   - 性能优化
   - 状态监控完善
   - 历史记录

### 第二阶段：中优先级功能（2-3周）

5. **仪表盘增强** (3-5天)
6. **推荐功能增强** (2-3天)
7. **探索功能增强** (2-3天)
8. **音乐功能完善** (3-5天)

### 第三阶段：低优先级功能（未来考虑）

9. **文件格式转换** (5-7天) - 非必需，媒体库已支持转码
10. **文件清理功能增强** (2-3天)

---

## 📝 总结

### 核心功能状态
- ✅ **核心功能**: 已基本完成（RSS订阅、文件管理、字幕、搜索等）
- ⚠️ **增强功能**: 大部分已实现，需要完善和优化
- ❌ **缺失功能**: 主要是低优先级功能（文件格式转换等）

### 主要待完成工作
1. **网络功能增强**: DOH支持、代理增强（Github API代理）
2. **OCR功能完善**: 更多站点、统计、前端界面
3. **系统优化**: 订阅刷新、性能优化
4. **用户体验**: 仪表盘、推荐、探索功能增强
5. **音乐功能**: 推荐算法完善、元数据管理增强（播放由媒体库提供）
6. **代码完善**: 解决所有TODO标记

### 功能说明
- **豆瓣代理**: 不需要代理支持，已从清单中移除
- **音乐播放**: 由Emby/Jellyfin/Plex等媒体库提供，VabHub负责文件管理
- **文件格式转换**: 非必需功能，媒体库已支持实时转码

### 建议优先级
1. 🔴 **高优先级**: DOH支持、OCR增强、代理增强、订阅刷新优化
2. 🟡 **中优先级**: 仪表盘、推荐、探索、音乐功能完善
3. 🟢 **低优先级**: 文件格式转换、文件清理增强

---

**最后更新**: 2025-01-XX
**文档版本**: 1.0

