# 功能测试执行指南

## 📋 测试准备

### 1. 启动服务

**方式1: 使用简化启动脚本（推荐）**
```bash
cd VabHub/backend
python run_server.py
```

**方式2: 使用批处理文件（Windows）**
```bash
快速启动服务.bat
```

**方式3: 使用uvicorn直接启动**
```bash
cd VabHub/backend
python -m uvicorn main:app --host 0.0.0.0 --port 8000 --reload
```

### 2. 创建测试用户

**运行测试用户创建脚本**
```bash
python backend/scripts/create_test_user_simple.py
```

**测试用户信息**:
- 用户名: `test_user`
- 邮箱: `test@example.com`
- 密码: `test_password_123`

---

## 🧪 测试执行

### 1. 基础功能测试

**运行简单测试**
```bash
python backend/scripts/test_simple.py
```

**测试内容**:
- 根端点测试
- API文档测试
- 健康检查测试

### 2. 功能模块测试

**运行功能测试**
```bash
python backend/scripts/test_functional.py
```

**测试内容**:
- 用户注册
- 用户登录
- 获取用户信息
- 创建订阅
- 获取订阅列表
- 获取仪表盘数据
- 获取设置

### 3. API端点测试

**运行API端点测试**
```bash
python backend/scripts/test_api_endpoints.py
```

**测试内容**:
- 所有API端点的连接测试
- 响应状态码验证
- 统一响应格式验证

### 4. 完整功能测试

**运行完整测试**
```bash
python backend/scripts/test_backend_basic.py
```

**测试内容**:
- 健康检查
- API文档
- 数据库连接
- Redis连接
- 统一响应格式

---

## 📊 测试结果

### 测试状态

#### 基础测试
- ✅ 根端点: 通过
- ✅ API文档: 通过
- ⚠️ 健康检查: 部分失败（非关键）

#### 功能测试
- ✅ 测试用户创建: 成功
- 🔄 用户注册: 待测试
- 🔄 用户登录: 待测试
- 🔄 获取用户信息: 待测试
- 🔄 创建订阅: 待测试
- 🔄 获取订阅列表: 待测试
- 🔄 获取仪表盘数据: 待测试
- 🔄 获取设置: 待测试

---

## 🎯 测试步骤

### 步骤1: 启动服务

1. **打开终端**
2. **进入项目目录**
3. **启动服务**
   ```bash
   cd VabHub/backend
   python run_server.py
   ```

### 步骤2: 等待服务启动

- **等待时间**: 约15-30秒
- **检查方式**: 
  - 访问 http://localhost:8000/docs
  - 或运行 `python backend/scripts/test_simple.py`

### 步骤3: 创建测试用户

1. **运行测试用户创建脚本**
   ```bash
   python backend/scripts/create_test_user_simple.py
   ```

2. **验证用户创建**
   - 查看输出确认用户创建成功
   - 记录用户名和密码

### 步骤4: 运行功能测试

1. **运行功能测试脚本**
   ```bash
   python backend/scripts/test_functional.py
   ```

2. **查看测试结果**
   - 检查测试通过率
   - 查看失败测试的详细信息
   - 记录测试结果

### 步骤5: 运行API端点测试

1. **运行API端点测试脚本**
   ```bash
   python backend/scripts/test_api_endpoints.py
   ```

2. **查看测试结果**
   - 检查所有端点的连接状态
   - 验证响应格式
   - 记录测试结果

---

## 🔍 测试检查清单

### 服务状态
- [ ] 服务已启动
- [ ] 端口8000正常监听
- [ ] API文档可访问
- [ ] 根端点正常响应

### 测试用户
- [ ] 测试用户已创建
- [ ] 用户凭证正确
- [ ] 用户可以登录

### 功能测试
- [ ] 用户注册测试
- [ ] 用户登录测试
- [ ] 获取用户信息测试
- [ ] 创建订阅测试
- [ ] 获取订阅列表测试
- [ ] 获取仪表盘数据测试
- [ ] 获取设置测试

### API端点测试
- [ ] 所有端点连接测试
- [ ] 响应状态码验证
- [ ] 统一响应格式验证

---

## 🐛 常见问题

### 问题1: 服务无法启动

**解决方法**:
1. 检查端口是否被占用
2. 检查数据库配置
3. 查看服务日志
4. 使用简化启动脚本

### 问题2: 测试用户创建失败

**解决方法**:
1. 检查数据库连接
2. 检查用户表是否存在
3. 查看错误日志
4. 手动创建用户

### 问题3: 功能测试失败

**解决方法**:
1. 检查服务是否运行
2. 检查测试用户是否存在
3. 检查Token是否有效
4. 查看测试日志

### 问题4: API端点测试失败

**解决方法**:
1. 检查服务是否运行
2. 检查端点URL是否正确
3. 检查认证Token
4. 查看错误响应

---

## 📝 测试记录

### 测试时间
[填写测试时间]

### 测试环境
- 操作系统: Windows 10
- Python版本: 3.11
- 数据库: SQLite
- 服务端口: 8000

### 测试结果
- [ ] 基础测试: [通过/失败]
- [ ] 功能测试: [通过/失败]
- [ ] API端点测试: [通过/失败]
- [ ] 完整测试: [通过/失败]

### 发现问题
- [ ] 无
- [ ] 问题1: [描述]
- [ ] 问题2: [描述]

### 修复措施
- [ ] 无
- [ ] 修复1: [描述]
- [ ] 修复2: [描述]

---

## 🎊 总结

### 测试流程
1. 启动服务
2. 创建测试用户
3. 运行功能测试
4. 运行API端点测试
5. 记录测试结果

### 测试重点
- 认证功能
- 订阅管理
- 下载管理
- 搜索系统
- 其他功能模块

### 下一步
- 修复发现的问题
- 完善测试脚本
- 增加更多测试用例
- 性能测试

---

**创建时间**: 2025-11-09  
**最后更新**: 2025-11-09  
**状态**: 测试准备完成，待执行

