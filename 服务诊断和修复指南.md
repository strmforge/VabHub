# 服务诊断和修复指南

## 🔍 当前状态

### 后端服务
- **状态**: ✅ 运行中
- **端口**: 8000
- **进程ID**: 53528
- **访问测试**: 需要验证

### 前端服务
- **状态**: ❌ 未运行
- **端口**: 5173
- **问题**: 服务未启动

---

## 🚀 修复步骤

### 步骤1: 验证后端服务

打开浏览器或使用curl测试：
```bash
curl http://localhost:8000/health
```

或者访问：
- http://localhost:8000/health
- http://localhost:8000/docs

### 步骤2: 启动前端服务

#### 方法1: 使用命令行
```bash
cd frontend
npm run dev
```

#### 方法2: 使用批处理脚本
双击运行：`启动前端.bat`

#### 方法3: 检查依赖
如果启动失败，可能需要安装依赖：
```bash
cd frontend
npm install --legacy-peer-deps
npm run dev
```

---

## 🐛 常见问题排查

### 问题1: 后端服务无法访问

#### 检查1: 服务是否真的在运行
```powershell
Get-NetTCPConnection -LocalPort 8000
```

#### 检查2: 防火墙是否阻止
```powershell
Get-NetFirewallRule | Where-Object {$_.DisplayName -like "*8000*"}
```

#### 检查3: 服务是否绑定到正确的地址
后端应该绑定到 `0.0.0.0`，检查 `backend/app/core/config.py`:
```python
HOST: str = "0.0.0.0"
```

### 问题2: 前端服务无法启动

#### 检查1: 依赖是否安装
```bash
cd frontend
ls node_modules
```

#### 检查2: 端口是否被占用
```powershell
Get-NetTCPConnection -LocalPort 5173
```

#### 检查3: 查看启动错误
```bash
cd frontend
npm run dev
```
查看终端中的错误信息

### 问题3: 浏览器无法访问

#### 检查1: 使用不同的浏览器
- Chrome
- Edge
- Firefox

#### 检查2: 清除浏览器缓存
- 按 `Ctrl+Shift+Delete`
- 清除缓存和Cookie

#### 检查3: 使用无痕模式
- Chrome: `Ctrl+Shift+N`
- Edge: `Ctrl+Shift+P`

#### 检查4: 检查代理设置
- 确保没有使用代理
- 检查系统代理设置

---

## 🔧 手动启动服务

### 启动后端服务

1. 打开新的终端窗口
2. 进入后端目录：
   ```bash
   cd F:\VabHub项目\VabHub\backend
   ```
3. 启动服务：
   ```bash
   python main.py
   ```
4. 应该看到类似输出：
   ```
   INFO:     Started server process
   INFO:     Waiting for application startup.
   INFO:     Application startup complete.
   INFO:     Uvicorn running on http://0.0.0.0:8000
   ```

### 启动前端服务

1. 打开新的终端窗口
2. 进入前端目录：
   ```bash
   cd F:\VabHub项目\VabHub\frontend
   ```
3. 启动服务：
   ```bash
   npm run dev
   ```
4. 应该看到类似输出：
   ```
   VITE v5.x.x  ready in xxx ms
   ➜  Local:   http://localhost:5173/
   ➜  Network: http://192.168.x.x:5173/
   ```

---

## ✅ 验证步骤

### 1. 验证后端服务
访问以下地址，应该能看到JSON响应：
- http://localhost:8000/health
- http://localhost:8000/docs

### 2. 验证前端服务
访问以下地址，应该能看到VabHub登录页面：
- http://localhost:5173
- http://127.0.0.1:5173

### 3. 验证前后端连接
1. 打开前端页面
2. 打开浏览器开发者工具 (F12)
3. 查看Network标签
4. 尝试登录
5. 检查API请求是否成功

---

## 🆘 如果仍然无法访问

### 收集信息
1. **后端服务日志**
   - 查看启动时的输出
   - 查看是否有错误信息

2. **前端服务日志**
   - 查看启动时的输出
   - 查看是否有编译错误

3. **浏览器控制台**
   - 按F12打开开发者工具
   - 查看Console标签的错误信息
   - 查看Network标签的请求状态

4. **系统信息**
   - Windows版本
   - Node.js版本
   - Python版本

### 临时解决方案

#### 方案1: 使用127.0.0.1代替localhost
- 前端: http://127.0.0.1:5173
- 后端: http://127.0.0.1:8000

#### 方案2: 检查hosts文件
确保hosts文件中没有错误的localhost映射：
```
C:\Windows\System32\drivers\etc\hosts
```

#### 方案3: 重启服务
1. 完全关闭所有服务
2. 等待几秒钟
3. 重新启动服务

---

## 📝 诊断清单

- [ ] 后端服务正在运行
- [ ] 后端服务可以访问 (http://localhost:8000/health)
- [ ] 前端服务正在运行
- [ ] 前端服务可以访问 (http://localhost:5173)
- [ ] 浏览器可以打开页面
- [ ] 没有防火墙阻止
- [ ] 端口没有被占用
- [ ] 依赖已正确安装

---

**请按照上述步骤逐一排查，如果仍有问题，请告诉我具体的错误信息！**

